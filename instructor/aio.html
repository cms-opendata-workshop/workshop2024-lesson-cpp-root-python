<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Open Data analysis in C++ and Python: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="dpoa-logo" alt="CMS DPOA logo" src="../assets/images/dpoa-logo.png">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="CMS DPOA small logo" src="../assets/images/dpoa-logo-sm.png">
</div>
    <div class="lesson-title-md">
      Open Data analysis in C++ and Python
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Open Data analysis in C++ and Python
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr></ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Open Data analysis in C++ and Python
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Introduction</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-cpp-hello-world.html">2. Lightning overview of C++</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-root-and-cpp-read-and-write.html">3. Using ROOT with C++ to write and read a file</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-root-and-cpp-fill-a-histogram.html">4. Using ROOT with C++ to fill a histogram</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-going-further-with-pyroot.html">5. Using ROOT with python</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-uproot.html">6. Using uproot to open ROOT files</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-awkward.html">7. Using awkward arrays to analyze HEP data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
</ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-introduction"><p>Content from <a href="introduction.html">Introduction</a></p>
<hr>
<p>Last updated on 2024-07-02 |

        <a href="https://github.com/cms-opendata-workshop/workbench-template-md/edit/main/episodes/introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 5 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is C++?</li>
<li>What is ROOT?</li>
<li>What is the point of these exercises?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn a bit about C++ and how to compile C++ code.</li>
<li>Learn how to use ROOT to write and read from files, using the C++
libraries.</li>
<li>Learn how to use ROOT to investigate data and create simple
histograms.</li>
<li>Explore the ROOT python libraries.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="lets-talk-about-root">Let’s talk about ROOT!<a class="anchor" aria-label="anchor" href="#lets-talk-about-root"></a>
<a class="anchor" aria-label="anchor" href="#lets-talk-about-root"></a>
</h2>
<hr class="half-width">
<p>From the <a href="https://root.cern/" class="external-link">ROOT website</a>:</p>
<div id="testimonial1" class="callout testimonial">
<div class="callout-square">
<i class="callout-icon" data-feather="heart"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Testimonial<a class="anchor" aria-label="anchor" href="#testimonial1"></a>
</h3>
<div class="callout-content">
<p><em>ROOT is a framework for data processing, born at CERN, at the
heart of the research on high-energy physics. Every day, thousands of
physicists use ROOT applications to analyze their data or to perform
simulations.</em></p>
<p>In short, ROOT is an overarching toolkit that defines a file
structure, methods to analyze particle physics data, visualization
tools, and is the backbone of many widely used statistical analysis tool
kits, such as RooFit and RooStats. You don’t <em>need</em> to use ROOT
for your own analysis, but you will have to have some familiarity with
it when you are first accessing the open data.</p>
</div>
</div>
</div>
<p>OK, that sounds cool. So what’s the deal with C++?</p>
</section><section><h2 class="section-heading" id="root-and-c">ROOT and C++<a class="anchor" aria-label="anchor" href="#root-and-c"></a>
<a class="anchor" aria-label="anchor" href="#root-and-c"></a>
</h2>
<hr class="half-width">
<p>In the mid-80’s, <a href="https://en.wikipedia.org/wiki/C%2B%2B" class="external-link">C++</a> extended the very
popular <a href="https://en.wikipedia.org/wiki/C_(programming_language)" class="external-link">C
programming language</a>, primarily with the introduction of <a href="https://en.wikipedia.org/wiki/Object-oriented_programming" class="external-link">object-oriented
programming</a> (OOP). This programming paradigm was adopted by many
particle physics experiments in the 1990’s and when ROOT was written, it
was written in C++. While there are now python hooks to call the ROOT
functions, the underlying code is all in C++.</p>
<p>Because C++ is a compiled code, it is usually much faster than a
scripted language like python, though that is changing with modern
python tools. Still, since much of the original analysis and access code
was written in C++ and calling the C++ ROOT libraries, it’s good to know
some of the basics of ROOT, in a C++ context.</p>
<p>Most CMS analysts interface with ROOT using python scripts and you
may find yourself using a similar workflow. Later on in this lesson,
we’ll walk you through some very basic python scripts and point you
toward more in-depth tutorials, for those who want to go further.</p>
<div id="you-still-have-choices" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="you-still-have-choices" class="callout-inner">
<h3 class="callout-title">You still have choices!<a class="anchor" aria-label="anchor" href="#you-still-have-choices"></a>
</h3>
<div class="callout-content">
<p>Just to emphasize, you really only <em>need</em> to use ROOT and C++
at the early stages of analyzing CMS Open Data in the AOD (Run 1) or
MiniAOD (Run 2) formats. These datasets require using CMS-provided tools
that perform much better in C++ than python. However, downstream in your
analysis or to analyze Run 2 NanoAOD files, you are welcome to use
whatever tools and file formats you choose.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>C++ has a reputation for being intimidating, but there are only a
few things you need to learn to edit the open data code for your own
uses.</li>
<li>You can use the ROOT toolkit using both C++ and python.</li>
<li>Some ROOT code is written in C++ to access the datafiles.</li>
<li>People will often use simpler C++ scripts or python scripts to
analyze reduced datasets.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-02-cpp-hello-world"><p>Content from <a href="02-cpp-hello-world.html">Lightning overview of C++</a></p>
<hr>
<p>Last updated on 2024-07-09 |

        <a href="https://github.com/cms-opendata-workshop/workbench-template-md/edit/main/episodes/02-cpp-hello-world.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I write and execute C++ code?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To write a <em>hello-world</em> C++ program</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="setting-up-your-working-area">Setting up your working area<a class="anchor" aria-label="anchor" href="#setting-up-your-working-area"></a>
<a class="anchor" aria-label="anchor" href="#setting-up-your-working-area"></a>
</h2>
<hr class="half-width">
<p>If you completed the <a href="https://cms-opendata-workshop.github.io/workshopwhepp-lesson-docker/" class="external-link">Docker
pre-exercises</a> you should already have worked through <a href="https://cms-opendata-workshop.github.io/workshopwhepp-lesson-docker/03-docker-for-cms-opendata/index.html" class="external-link">this
episode</a>, under <strong>Download the docker images for ROOT and
python tools and start container</strong>, and you will have</p>
<ul>
<li>a working directory <code>cms_open_data_root</code> on your local
computer</li>
<li>a docker container with name <code>my_root</code> created with the
working directory <code>cms_open_data_root</code> mounted into the
<code>/code</code> directory of the container.</li>
</ul>
<p>Start your ROOT container with</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">docker</span> start <span class="at">-i</span> my_root</span></code></pre>
</div>
<p>In the container, you will be in the <code>/code</code> directory and
it shares the files with your local <code>cms_open_data_root</code>
directory.</p>
<div id="if-youre-using-apptainer" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="if-youre-using-apptainer" class="callout-inner">
<h3 class="callout-title">If you’re using apptainer:<a class="anchor" aria-label="anchor" href="#if-youre-using-apptainer"></a>
</h3>
<div class="callout-content">
<p>Whenever you see a <code>docker start</code> instruction, replace it
with <code>apptainer shell</code> to open either the ROOT or Python
container image. The specific commands in this pre-exercise and during
the live workshop will be given for docker, since that is the most
common application. As a general rule, editing of files will be done in
the standard terminal (the containers do not have all text editors!) or
via the jupyter-lab interface, and then commands will be executed inside
the container shell. If you see <code>Singularity&gt;</code> on your
command line, you are ready to run a ROOT or python script.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="your-first-cc-program-optional-review">Your first C/C++ program (Optional Review!)<a class="anchor" aria-label="anchor" href="#your-first-cc-program-optional-review"></a>
<a class="anchor" aria-label="anchor" href="#your-first-cc-program-optional-review"></a>
</h2>
<hr class="half-width">
<p>Let’s start with writing a simple <code>hello world</code> program in
C. First we’ll edit the <em>source</em> code with an editor of your
choice.</p>
<p>Note that you will <em>edit</em> the file in a local terminal on your
computer and then <em>run</em> the file in the Docker environment. This
is because we mounted the <code>cms_open_data_root</code> directory on
your local disk such that it is visible inside the Docker container.</p>
<p>Let’s create a new file called <code>hello_world.cc</code> in the
<code>cms_open_data_root</code> directory, using your preferred
editor.</p>
<p>The first thing we need to do, is <code>include</code> some standard
libraries. These libraries allow us to access the C and C++ commands to
print to the screen (<code>stdout</code> and <code>stderr</code>) as
well as other basic function.</p>
<p>At the very beginning of your file, add these three lines</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdlib&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdio&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span></code></pre>
</div>
<p>The first library, <code>cstdlib</code>, you will see in almost every
C++ program as it has many of the very basic functions, including those
to allocate and free up memory, or even just exit the program.</p>
<p>The second library, <code>cstdio</code>, contains the basic C
functions to print to screen, like <code>printf</code>.</p>
<p>The third library, <code>iostream</code>, contains C++ functions to
print to screen or write to files.</p>
<p>Usually people will use one or the other of the C or C++ printing
functions, but for pedagogical purposes, we show you both.</p>
<p>Every C++ program must have a <code>main</code> function. So let’s
define it here. The scope of this function is defined by curly brackets
<code>{ }</code>. So let’s add</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
<p>The <code>int</code> at the beginning tells us that this function
will be returning an integer value. At the end of the <code>main</code>
function we have <code>return 0</code>, which usually means the function
has run successfully to completion.</p>
<div id="warning" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="warning" class="callout-inner">
<h3 class="callout-title">Warning!<a class="anchor" aria-label="anchor" href="#warning"></a>
</h3>
<div class="callout-content">
<p>Note that at the end of <code>return 0</code>, we have a semicolon
<code>;</code>, which is how C/C++ programs terminate lines. If you’re
used to programming in python or any other language that does not use a
similar terminator, this can be tough to remember. If you get errors
when you compile, check the error statements for the lack of
<code>;</code> in any of your lines!</p>
</div>
</div>
</div>
<p>For this function, we are not passing in any arguments so we just
have the empty <code>( )</code> after the <code>main</code>.</p>
<p>This function would compile, but it doesn’t do anything. Let’s print
some text to screen. Before the <code>return 0;</code> line, let’s add
these three lines.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Hello world! This uses the ANSI C 'printf' statement</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>    <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">"Hello world! This uses the C++ 'iostream' library to direct output to standard out."</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="bu">std::</span>cerr <span class="op">&lt;&lt;</span> <span class="st">"Hello world! This uses the C++ 'iostream' library to direct output to standard error."</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span></code></pre>
</div>
<p>The text itself, should explain what they are doing. If you want to
learn more about standard error and standard output, you can read more
on <a href="https://en.wikipedia.org/wiki/Standard_streams" class="external-link">Wikipedia</a>.</p>
<p>OK! Your full <code>hello_world.cc</code> should look like this.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Full source code file for hello_world.cc
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdlib&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdio&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Hello world! This uses the ANSI C 'printf' statement</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>    <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">"Hello world! This uses the C++ 'iostream' library to direct output to standard out."</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>    <span class="bu">std::</span>cerr <span class="op">&lt;&lt;</span> <span class="st">"Hello world! This uses the C++ 'iostream' library to direct output to standard error."</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>This won’t do anything yet though! We need to <em>compile</em> the
code, which means turning this into <a href="https://en.wikipedia.org/wiki/Machine_code" class="external-link"><em>machine
code</em></a>. To do this, we’ll use the GNU C++ compiler,
<code>g++</code>. Once you have saved your file, go to the container
shell, make sure (e.g. with <code>ls -l</code>) that you your file is in
the current directory and type this in your shell.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">g++</span> hello_world.cc <span class="at">-o</span> hello_world</span></code></pre>
</div>
<p>This compiles your code to an executable called
<code>hello_world</code>. You can now run this by typing the following
on the shell command line, after which you’ll see the subsequent
output.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">./hello_world</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Hello world! This uses the ANSI C 'printf' statement
Hello world! This uses the C++ 'iostream' library to direct output to standard out.
Hello world! This uses the C++ 'iostream' library to direct output to standard error.</code></pre>
</div>
<p>When you are working with the Open Data, you will be looping over
events and may find yourself making selections based on certain physics
criteria. To that end, you may want to familiarize yourself with the C++
syntax for <a href="https://www.w3schools.com/cpp/cpp_for_loop.asp" class="external-link">loops</a> and <a href="https://www.w3schools.com/cpp/cpp_conditions.asp" class="external-link">conditionals</a>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>We must compile our C++ code before we can execute it.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-03-root-and-cpp-read-and-write"><p>Content from <a href="03-root-and-cpp-read-and-write.html">Using ROOT with C++ to write and read a file</a></p>
<hr>
<p>Last updated on 2024-07-09 |

        <a href="https://github.com/cms-opendata-workshop/workbench-template-md/edit/main/episodes/03-root-and-cpp-read-and-write.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 35 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Why do I need to use ROOT?</li>
<li>How do I use ROOT with C++?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Write a ROOT file using compiled C++ code.</li>
<li>Read a ROOT file using compiled C++ code.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="why-root">Why ROOT?<a class="anchor" aria-label="anchor" href="#why-root"></a>
<a class="anchor" aria-label="anchor" href="#why-root"></a>
</h2>
<hr class="half-width">
<p>HEP data can be challenging! Not just to analyze but to store! The
data don’t lend themselves to neat rows in a spreadsheet. One event
might have 3 muons and the next event might have none. One event might
have 2 jets and the next event might have 20. What to do???</p>
<p>The ROOT toolkit provides a file format that can allow for efficient
storage of this type of data with heterogenous entries in each event. It
<em>also</em> provides a pretty complete analysis environment with
specialized libraries and visualization packages. Until recently, you
had to install the entire ROOT package just to read a file. The software
provided by CMS to read the open data relies on some minimal knowledge
of ROOT to access. From there, you can write out more ROOT files for
further analysis or dump the data (or some subset of the data) to a
format of your choosing.</p>
</section><section><h2 class="section-heading" id="interfacing-with-root">Interfacing with ROOT<a class="anchor" aria-label="anchor" href="#interfacing-with-root"></a>
<a class="anchor" aria-label="anchor" href="#interfacing-with-root"></a>
</h2>
<hr class="half-width">
<p>ROOT is a toolkit. That is, it is a set of functions and libraries
that can be utilized in a variety of languages and workflows. It was
originally written in C++ and lends itself nicely to being used in
standard, compiled C++ code.</p>
<p>However, analysts wanted something more interactive, and so the ROOT
team developed <a href="https://root.cern.ch/root/html534/guides/users-guide/CINT.html" class="external-link">CINT,
a C++ interpreter</a>. This gave users an iteractive environment where
they could type of C++ code one line at a time and have it executed
immediately. This gave rise to C++ scripts that many analysts use and in
fact the sample <a href="https://root.cern/doc/master/group__Tutorials.html" class="external-link">ROOT
tutorals</a> are almost exclusively written as these C++ scripts (with a
<code>.C</code> file extension). Because they are written to run in
CINT, they usually do not need the standard C++ <code>include</code>
statements that you will see in the examples below.</p>
<p>With the rise of the popularity of python, a set of Python-C++
bindings were written and eventually officially supported by the ROOT
development team, called <a href="https://root.cern/manual/python/" class="external-link">PyROOT</a>. Many analysts
currently write the code which plots or fits their code using PyROOT,
and we will show you some examples later in this exercise.</p>
</section><section><h2 class="section-heading" id="what-wont-you-learn-here">What won’t you learn here<a class="anchor" aria-label="anchor" href="#what-wont-you-learn-here"></a>
<a class="anchor" aria-label="anchor" href="#what-wont-you-learn-here"></a>
</h2>
<hr class="half-width">
<p>ROOT is an incredibly powerful toolkit and has <em>a lot</em> in it.
It is heavily used by most nuclear and particle physics experiments
running today. As such, a full overview is beyond the scope of this
minimal tutorial!</p>
<p>This tutorial will <em>not</em> teach you how to:</p>
<ul>
<li>Make any plots more sophisticated than a basic histogram.</li>
<li>Fit your data</li>
<li>Use any of the HEP-specific libraries
(e.g. <code>TLorentzVector</code>)</li>
</ul></section><section><h2 class="section-heading" id="ok-where-can-i-learn-that-stuff">OK, where <em>can</em> I learn that stuff?<a class="anchor" aria-label="anchor" href="#ok-where-can-i-learn-that-stuff"></a>
<a class="anchor" aria-label="anchor" href="#ok-where-can-i-learn-that-stuff"></a>
</h2>
<hr class="half-width">
<p>There are some great resources and tutorials out there for going
further.</p>
<ul>
<li>
<a href="https://root.cern/primer/" class="external-link">The official ROOT Primer</a>.
The recommended starting point to learn what ROOT can do.</li>
<li>
<a href="https://root.cern/doc/master/group__Tutorials.html" class="external-link">The
official ROOT tutorials</a> This is a fairly comprehensive listing of
well-commented examples, written in C++ <em>scripts</em> that are
designed to be run from within the ROOT C-interpreter.</li>
<li>
<a href="https://github.com/root-project/training/tree/master/SummerStudentCourse/2022" class="external-link">ROOT
tutorial (2022).</a>. Tutorial from offical ROOT project for summer
students.</li>
<li>
<a href="https://cms-opendata-workshop.github.io/workshop-lesson-root/" class="external-link">Efficient
analysis with ROOT</a>. This is a more complete, end-to-end tutorial on
using ROOT in a CMS analysis workflow. It was created in 2020 by some of
our CMS colleagues for a separate workshop, but much of the material is
relevant for the Open Data effort. It takes about 2.5 hours to complete
the tutorial.</li>
<li>
<a href="https://www.nevis.columbia.edu/~seligman/root-class/" class="external-link">ROOT
tutorial from Nevis Lab (Columbia Univ.)</a>. Very complete and always
up-to-date tutorial from our friends at Columbia.</li>
</ul>
<div id="be-in-the-container" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="be-in-the-container" class="callout-inner">
<h3 class="callout-title">Be in the container!<a class="anchor" aria-label="anchor" href="#be-in-the-container"></a>
</h3>
<div class="callout-content">
<p>For this episode, you’ll still be running your code from the
<code>my_root</code> docker container that you launched in the previous
episode.</p>
<p>As you edit the files though, you may want to do the editing from
your <em>local</em> environment, so that you have access to your
preferred editors.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="root-terminology">ROOT terminology<a class="anchor" aria-label="anchor" href="#root-terminology"></a>
<a class="anchor" aria-label="anchor" href="#root-terminology"></a>
</h2>
<hr class="half-width">
<p>To store these datasets, ROOT uses an object called
<code>TTree</code> (ROOT objects are often prefixed by a
<code>T</code>).</p>
<p>Each variable on the <code>TTree</code>, for example the transverse
momentum of a muon, is stored in its own <code>TBranch</code>.</p>
<div id="source-code-for-c-lessons" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="source-code-for-c-lessons" class="callout-inner">
<h3 class="callout-title">Source code for C++ lessons<a class="anchor" aria-label="anchor" href="#source-code-for-c-lessons"></a>
</h3>
<div class="callout-content">
<p>There’s a fair amount of C++ in this lesson and you’ll get the most
out of it if you work through it all and type it all out.</p>
<p>However, it’s easy to make a mistake, particularly with the
<code>Makefile</code>. We’ve made the the source code available in this
<a href="https://github.com/cms-opendata-workshop/workshop2022-lesson-cpp-root-python/blob/gh-pages/data/root_and_cpp_tutorial_source_code.tgz" class="external-link">tarball</a>.
Just follow the link and click on the <strong>Download</strong> button
or download it directly with <code>wget</code> to you working directory
<code>cms_open_data_root</code> in your local bash terminal with:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">wget</span> https://raw.githubusercontent.com/cms-opendata-workshop/workshop2022-lesson-cpp-root-python/gh-pages/data/root_and_cpp_tutorial_source_code.tgz</span></code></pre>
</div>
<p>Untar the file with:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-zxvf</span> root_and_cpp_tutorial_source_code.tgz</span></code></pre>
</div>
<p>It will create a directory called
<code>root_and_cpp_tutorial_source_code</code> with the files in it.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="write-to-a-file">Write to a file<a class="anchor" aria-label="anchor" href="#write-to-a-file"></a>
<a class="anchor" aria-label="anchor" href="#write-to-a-file"></a>
</h2>
<hr class="half-width">
<p>Let’s create a file with name <code>write_ROOT_file.cc</code> using
our preferred editor. We’ll call this file
<code>write_ROOT_file.cc</code> and it will be saved in the
<code>cms_open_data_root</code> directory.</p>
<p>As in our last example, we first <code>include</code> some header
files, both the standard C++ ones and some new ROOT-specific ones.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdio&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdlib&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TROOT.h"</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TTree.h"</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TFile.h"</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TRandom.h"</span></span></code></pre>
</div>
<p>Note the inclusion of <code>TRandom.h</code>, which we’ll be using to
generate some random data for our test file.</p>
<p>Next, we’ll create our <code>main</code> function and start it off by
defining our ROOT file object. We’ll also include some explanatory
comments, which in the C++ syntax are preceded by two slashes,
<code>//</code>.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>    <span class="co">// Create a ROOT file, f.</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    <span class="co">// The first argument, "tree.root" is the name of the file.</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="co">// The second argument, "recreate", will recreate the file, even if it already exists.</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    TFile f<span class="op">(</span><span class="st">"tree.root"</span><span class="op">,</span><span class="st">"recreate"</span><span class="op">);</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
<p>Now we define the <code>TTree</code> object which will hold all of
our variables and the data they represent.</p>
<p>This line comes after the <code>TFile</code> creation, but before the
<code>return 0</code> statement at the end of the main function.
Subsequent edits will also follow the previous edit but come before
<code>return 0</code> statement.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>    <span class="co">// A TTree object called t1.</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="co">// The first argument is the name of the object as stored by ROOT.</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="co">// The second argument is a short descriptor.</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    TTree t1<span class="op">(</span><span class="st">"t1"</span><span class="op">,</span><span class="st">"A simple Tree with simple variables"</span><span class="op">);</span></span></code></pre>
</div>
<p>For this example, we’ll assume we’re recording the missing transverse
energy, which means there is only one value recorded for each event.</p>
<p>We’ll also record the energy and momentum (transverse momentum, eta,
phi) for jets, where there could be between 0 and 5 jets in each
event.</p>
<p>This means we will define some C++ variables that will be used in the
program. We do this <em>before</em> we define the <code>TBranch</code>es
in the <code>TTree</code>.</p>
<p>When we define the variables, we use ROOT’s <code>Float_t</code> and
<code>Int_t</code> types, which are analogous to <code>float</code> and
<code>int</code> but are less dependent on the underlying computer OS
and architecture.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>   <span class="dt">Float_t</span> met<span class="op">;</span> <span class="co">// Missing energy in the transverse direction.</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>   <span class="dt">Int_t</span> njets<span class="op">;</span> <span class="co">// Necessary to keep track of the number of jets</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>   <span class="co">// We'll define these assuming we will not write information for</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>   <span class="co">// more than 16 jets. We'll have to check for this in the code otherwise</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>   <span class="co">// it could crash!</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>   <span class="dt">Float_t</span> pt<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>   <span class="dt">Float_t</span> eta<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>   <span class="dt">Float_t</span> phi<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span></code></pre>
</div>
<p>We now define the <code>TBranch</code> for the <code>met</code>
variable.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>    <span class="co">// The first argument is ROOT's internal name of the variable.</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    <span class="co">// The second argument is the *address* of the actual variable we defined above</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>    <span class="co">// The third argument defines the *type* of the variable to be stored, and the "F"</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    <span class="co">// at the end signifies that this is a float</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>    t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"met"</span><span class="op">,&amp;</span>met<span class="op">,</span><span class="st">"met/F"</span><span class="op">);</span></span></code></pre>
</div>
<p>Next we define the <code>TBranch</code>es for each of the other
variables, but the syntax is slightly different as these are acting as
arrays with a varying number of entries for each event.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>    <span class="co">// First we define njets where the syntax is the same as before,</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>    <span class="co">// except we take care to identify this as an integer with the final</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>    <span class="co">// /I designation</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"njets"</span><span class="op">,&amp;</span>njets<span class="op">,</span><span class="st">"njets/I"</span><span class="op">);</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    <span class="co">// We can now define the other variables, but we use a slightly different</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    <span class="co">// syntax for the third argument to identify the variable that will be used</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>    <span class="co">// to count the number of entries per event</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>    t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"pt"</span><span class="op">,&amp;</span>pt<span class="op">,</span><span class="st">"pt[njets]/F"</span><span class="op">);</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>    t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"eta"</span><span class="op">,&amp;</span>eta<span class="op">,</span><span class="st">"eta[njets]/F"</span><span class="op">);</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>    t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"phi"</span><span class="op">,&amp;</span>phi<span class="op">,</span><span class="st">"phi[njets]/F"</span><span class="op">);</span></span></code></pre>
</div>
<p>OK, we’ve defined where everything will be stored! Let’s now generate
1000 mock events.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>    <span class="dt">Int_t</span> nevents <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>nevents<span class="op">;</span>i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>        <span class="co">// Generate random number between 10-60 (arbitrary)</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>        met <span class="op">=</span> <span class="dv">50</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">()</span> <span class="op">+</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>        <span class="co">// Generate random number between 0-5, inclusive</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>        njets <span class="op">=</span> gRandom<span class="op">-&gt;</span>Integer<span class="op">(</span><span class="dv">6</span><span class="op">);</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> j<span class="op">=</span><span class="dv">0</span><span class="op">;</span>j<span class="op">&lt;</span>njets<span class="op">;</span>j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>            pt<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="dv">100</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">();</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>            eta<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="dv">6</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">();</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>            phi<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="fl">6.28</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">()</span> <span class="op">-</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>        <span class="co">// After each event we need to *fill* the TTree</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>        t1<span class="op">.</span>Fill<span class="op">();</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>    <span class="co">// After we've run over all the events, we "change directory" (cd) to the file object</span></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a>    <span class="co">// and write the tree to it.</span></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a>    <span class="co">// We can also print the tree, just as a visual identifier to ourselves that</span></span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a>    <span class="co">// the program ran to completion.</span></span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a>    f<span class="op">.</span>cd<span class="op">();</span></span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a>    t1<span class="op">.</span>Write<span class="op">();</span></span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a>    t1<span class="op">.</span>Print<span class="op">();</span></span></code></pre>
</div>
<p>The full <code>write_ROOT_file.cc</code> should now look like
this:</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Full source code file for write_ROOT_file.cc
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdio&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdlib&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TROOT.h"</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TTree.h"</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TFile.h"</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TRandom.h"</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>   <span class="co">// Create a ROOT file, f.</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>   <span class="co">// The first argument, "tree.root" is the name of the file.</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>   <span class="co">// The second argument, "recreate", will recreate the file, even if it already exists.</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a>   TFile f<span class="op">(</span><span class="st">"tree.root"</span><span class="op">,</span> <span class="st">"recreate"</span><span class="op">);</span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>   <span class="co">// A TTree object called t1.</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a>   <span class="co">// The first argument is the name of the object as stored by ROOT.</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a>   <span class="co">// The second argument is a short descriptor.</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a>   TTree t1<span class="op">(</span><span class="st">"t1"</span><span class="op">,</span> <span class="st">"A simple Tree with simple variables"</span><span class="op">);</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a>   <span class="dt">Float_t</span> met<span class="op">;</span> <span class="co">// Missing energy in the transverse direction.</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a>   <span class="dt">Int_t</span> njets<span class="op">;</span> <span class="co">// Necessary to keep track of the number of jets</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a>   <span class="co">// We'll define these assuming we will not write information for</span></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a>   <span class="co">// more than 16 jets. We'll have to check for this in the code otherwise</span></span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a>   <span class="co">// it could crash!</span></span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a>   <span class="dt">Float_t</span> pt<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb10-30"><a href="#cb10-30" tabindex="-1"></a>   <span class="dt">Float_t</span> eta<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb10-31"><a href="#cb10-31" tabindex="-1"></a>   <span class="dt">Float_t</span> phi<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb10-32"><a href="#cb10-32" tabindex="-1"></a></span>
<span id="cb10-33"><a href="#cb10-33" tabindex="-1"></a>   <span class="co">// The first argument is ROOT's internal name of the variable.</span></span>
<span id="cb10-34"><a href="#cb10-34" tabindex="-1"></a>   <span class="co">// The second argument is the *address* of the actual variable we defined above</span></span>
<span id="cb10-35"><a href="#cb10-35" tabindex="-1"></a>   <span class="co">// The third argument defines the *type* of the variable to be stored, and the "F"</span></span>
<span id="cb10-36"><a href="#cb10-36" tabindex="-1"></a>   <span class="co">// at the end signifies that this is a float</span></span>
<span id="cb10-37"><a href="#cb10-37" tabindex="-1"></a>   t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"met"</span><span class="op">,&amp;</span>met<span class="op">,</span><span class="st">"met/F"</span><span class="op">);</span></span>
<span id="cb10-38"><a href="#cb10-38" tabindex="-1"></a></span>
<span id="cb10-39"><a href="#cb10-39" tabindex="-1"></a>   <span class="co">// First we define njets where the syntax is the same as before,</span></span>
<span id="cb10-40"><a href="#cb10-40" tabindex="-1"></a>   <span class="co">// except we take care to identify this as an integer with the final</span></span>
<span id="cb10-41"><a href="#cb10-41" tabindex="-1"></a>   <span class="co">// /I designation</span></span>
<span id="cb10-42"><a href="#cb10-42" tabindex="-1"></a>   t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"njets"</span><span class="op">,</span> <span class="op">&amp;</span>njets<span class="op">,</span> <span class="st">"njets/I"</span><span class="op">);</span></span>
<span id="cb10-43"><a href="#cb10-43" tabindex="-1"></a></span>
<span id="cb10-44"><a href="#cb10-44" tabindex="-1"></a>   <span class="co">// We can now define the other variables, but we use a slightly different</span></span>
<span id="cb10-45"><a href="#cb10-45" tabindex="-1"></a>   <span class="co">// syntax for the third argument to identify the variable that will be used</span></span>
<span id="cb10-46"><a href="#cb10-46" tabindex="-1"></a>   <span class="co">// to count the number of entries per event</span></span>
<span id="cb10-47"><a href="#cb10-47" tabindex="-1"></a>   t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"pt"</span><span class="op">,</span> <span class="op">&amp;</span>pt<span class="op">,</span> <span class="st">"pt[njets]/F"</span><span class="op">);</span></span>
<span id="cb10-48"><a href="#cb10-48" tabindex="-1"></a>   t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"eta"</span><span class="op">,</span> <span class="op">&amp;</span>eta<span class="op">,</span> <span class="st">"eta[njets]/F"</span><span class="op">);</span></span>
<span id="cb10-49"><a href="#cb10-49" tabindex="-1"></a>   t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"phi"</span><span class="op">,</span> <span class="op">&amp;</span>phi<span class="op">,</span> <span class="st">"phi[njets]/F"</span><span class="op">);</span></span>
<span id="cb10-50"><a href="#cb10-50" tabindex="-1"></a></span>
<span id="cb10-51"><a href="#cb10-51" tabindex="-1"></a>   <span class="dt">Int_t</span> nevents <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb10-52"><a href="#cb10-52" tabindex="-1"></a></span>
<span id="cb10-53"><a href="#cb10-53" tabindex="-1"></a>   <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>nevents<span class="op">;</span>i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb10-54"><a href="#cb10-54" tabindex="-1"></a></span>
<span id="cb10-55"><a href="#cb10-55" tabindex="-1"></a>       <span class="co">// Generate random number between 10-60 (arbitrary)</span></span>
<span id="cb10-56"><a href="#cb10-56" tabindex="-1"></a>       met <span class="op">=</span> <span class="dv">50</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">()</span> <span class="op">+</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb10-57"><a href="#cb10-57" tabindex="-1"></a></span>
<span id="cb10-58"><a href="#cb10-58" tabindex="-1"></a>       <span class="co">// Generate random number between 0-5, inclusive</span></span>
<span id="cb10-59"><a href="#cb10-59" tabindex="-1"></a>       njets <span class="op">=</span> gRandom<span class="op">-&gt;</span>Integer<span class="op">(</span><span class="dv">6</span><span class="op">);</span></span>
<span id="cb10-60"><a href="#cb10-60" tabindex="-1"></a></span>
<span id="cb10-61"><a href="#cb10-61" tabindex="-1"></a>       <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> j<span class="op">=</span><span class="dv">0</span><span class="op">;</span>j<span class="op">&lt;</span>njets<span class="op">;</span>j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb10-62"><a href="#cb10-62" tabindex="-1"></a>           pt<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="dv">100</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">();</span></span>
<span id="cb10-63"><a href="#cb10-63" tabindex="-1"></a>           eta<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="dv">6</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">();</span></span>
<span id="cb10-64"><a href="#cb10-64" tabindex="-1"></a>           phi<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="fl">6.28</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">()</span> <span class="op">-</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb10-65"><a href="#cb10-65" tabindex="-1"></a>       <span class="op">}</span></span>
<span id="cb10-66"><a href="#cb10-66" tabindex="-1"></a></span>
<span id="cb10-67"><a href="#cb10-67" tabindex="-1"></a>       <span class="co">// After each event we need to *fill* the TTree</span></span>
<span id="cb10-68"><a href="#cb10-68" tabindex="-1"></a>       t1<span class="op">.</span>Fill<span class="op">();</span></span>
<span id="cb10-69"><a href="#cb10-69" tabindex="-1"></a>   <span class="op">}</span></span>
<span id="cb10-70"><a href="#cb10-70" tabindex="-1"></a></span>
<span id="cb10-71"><a href="#cb10-71" tabindex="-1"></a>   <span class="co">// After we've run over all the events, we "change directory" to the file object</span></span>
<span id="cb10-72"><a href="#cb10-72" tabindex="-1"></a>   <span class="co">// and write the tree to it.</span></span>
<span id="cb10-73"><a href="#cb10-73" tabindex="-1"></a>   <span class="co">// We can also print the tree, just as a visual identifier to ourselves that</span></span>
<span id="cb10-74"><a href="#cb10-74" tabindex="-1"></a>   <span class="co">// the program ran to completion.</span></span>
<span id="cb10-75"><a href="#cb10-75" tabindex="-1"></a>   f<span class="op">.</span>cd<span class="op">();</span></span>
<span id="cb10-76"><a href="#cb10-76" tabindex="-1"></a>   t1<span class="op">.</span>Write<span class="op">();</span></span>
<span id="cb10-77"><a href="#cb10-77" tabindex="-1"></a>   t1<span class="op">.</span>Print<span class="op">();</span></span>
<span id="cb10-78"><a href="#cb10-78" tabindex="-1"></a>   </span>
<span id="cb10-79"><a href="#cb10-79" tabindex="-1"></a>   <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb10-80"><a href="#cb10-80" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Because we need to compile this in such a way that it links to the
ROOT libraries, we will use a <code>Makefile</code> to simplify the
build process.</p>
<p>Create a new file called <code>Makefile</code> in the same directory
as <code>write_ROOT_file.cc</code> and add the following to the file.
You’ll most likely do this with the editor of your choice.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MAKEFILE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode makefile" tabindex="0"><code class="sourceCode makefile"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="dt">CC</span><span class="ch">=</span><span class="st">g++</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="dt">CFLAGS</span><span class="ch">=</span><span class="st">-c -g -Wall `root-config --cflags`</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="dt">LDFLAGS</span><span class="ch">=</span><span class="st">`root-config --glibs`</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="dv">all:</span><span class="dt"> write_ROOT_file</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="dv">write_ROOT_file:</span><span class="dt"> write_ROOT_file.cc</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o write_ROOT_file.o write_ROOT_file.cc</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>    <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> -o write_ROOT_file write_ROOT_file.o <span class="ch">$(</span><span class="dt">LDFLAGS</span><span class="ch">)</span></span></code></pre>
</div>
<div id="warning-tabs-are-important-in-makefiles" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="warning-tabs-are-important-in-makefiles" class="callout-inner">
<h3 class="callout-title">Warning! Tabs are important in Makefiles!<a class="anchor" aria-label="anchor" href="#warning-tabs-are-important-in-makefiles"></a>
</h3>
<div class="callout-content">
<p>Makefiles have been around a long time and are used for many
projects, not just C/C++ code. While other build tools are slowly
supplanting them (e.g. CMake), Makefiles are a pretty tried and true
standard and it is worth taking time at some point and learning <a href="https://www.tutorialspoint.com/makefile/makefile_rules.htm" class="external-link">more
about them</a>.</p>
<p>One frustrating thing though can be a Makefile’s reliance on
<em>tabs</em> for specific purposes. In the example above, the following
lines are preceeded by a <em>tab</em> and <strong><em>not</em></strong>
four (4) spaces.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MAKEFILE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode makefile" tabindex="0"><code class="sourceCode makefile"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>   <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o write_ROOT_file.o write_ROOT_file.cc</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>   <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> -o write_ROOT_file write_ROOT_file.o <span class="ch">$(</span><span class="dt">LDFLAGS</span><span class="ch">)</span></span></code></pre>
</div>
<p>If your Makefile has spaces at those points instead of a tab,
<code>make</code> will not work for you and you will get an error.</p>
</div>
</div>
</div>
<p>You can now compile and run your compiled program from the command
line of your <code>my_root</code> container shell!</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">make</span> write_ROOT_file</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="ex">./write_ROOT_file</span></span></code></pre>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Output from write_ROOT_file
  </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>******************************************************************************
*Tree    :t1        : A simple Tree with simple variables                    *
*Entries :     1000 : Total =           51536 bytes  File  Size =      36858 *
*        :          : Tree compression factor =   1.35                       *
******************************************************************************
*Br    0 :met       : met/F                                                  *
*Entries :     1000 : Total  Size=       4542 bytes  File Size  =       3641 *
*Baskets :        1 : Basket Size=      32000 bytes  Compression=   1.12     *
*............................................................................*
*Br    1 :njets     : njets/I                                                *
*Entries :     1000 : Total  Size=       4552 bytes  File Size  =        841 *
*Baskets :        1 : Basket Size=      32000 bytes  Compression=   4.84     *
*............................................................................*
*Br    2 :pt        : pt[njets]/F                                            *
*Entries :     1000 : Total  Size=      14084 bytes  File Size  =      10445 *
*Baskets :        1 : Basket Size=      32000 bytes  Compression=   1.29     *
*............................................................................*
*Br    3 :eta       : eta[njets]/F                                           *
*Entries :     1000 : Total  Size=      14089 bytes  File Size  =      10424 *
*Baskets :        1 : Basket Size=      32000 bytes  Compression=   1.30     *
*............................................................................*
*Br    4 :phi       : phi[njets]/F                                           *
*Entries :     1000 : Total  Size=      14089 bytes  File Size  =      10758 *
*Baskets :        1 : Basket Size=      32000 bytes  Compression=   1.26     *
*............................................................................*</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Your numbers may be slightly different because of the random numbers
that are generated.</p>
<p>After you’ve run this, you can look in this directory
(<code>ls -ltr</code>) and see if you have a new file called
<code>tree.root</code>. This is the output of what you just ran.</p>
<p>Huzzah! You’ve successfully written your first ROOT file!</p>
<div id="will-i-have-to-make-my-open-data-analysis-code" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="will-i-have-to-make-my-open-data-analysis-code" class="callout-inner">
<h3 class="callout-title">Will I have to <code>make</code> my Open Data
analysis code?<a class="anchor" aria-label="anchor" href="#will-i-have-to-make-my-open-data-analysis-code"></a>
</h3>
<div class="callout-content">
<p>Maybe!</p>
<ul>
<li>If you prefer to write your end-level analysis code in C++, your
<code>make</code> setup will be very similar to this exercise</li>
<li>If you are analyzing AOD or MiniAOD data and using the dedicated CMS
software, a configuration and build system called <a href="https://twiki.cern.ch/twiki/bin/view/CMSPublic/SWGuideScram" class="external-link">SCRAM</a>
is used for this purpose of compiling and linking code.</li>
<li>If you only analyze NanoAOD samples and do so in python (see the
upcoming lesson pages!), then you will not use <code>make</code>
</li>
</ul>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="read-a-root-file">Read a ROOT file<a class="anchor" aria-label="anchor" href="#read-a-root-file"></a>
<a class="anchor" aria-label="anchor" href="#read-a-root-file"></a>
</h2>
<hr class="half-width">
<p>Let’s try to read the <code>tree.root</code> file now. We won’t do
much with but we’ll try to understand the process necessary to read in
all the data and loop over this event-by-event.</p>
<p>You will now edit (with your favourite editor) a file called
<code>read_ROOT_file.cc</code>. In this file, you’ll add the following
code.</p>
<p>We’ll start with the basic include statements and the main
program.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdio&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdlib&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TROOT.h"</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TTree.h"</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TFile.h"</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TRandom.h"</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
<p>In the <code>main</code> function, we’ll define the input file.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>   <span class="co">// Here's the input file</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>   <span class="co">// Without the 'recreate' argument, ROOT will assume this file exists to be read in.</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>   TFile f<span class="op">(</span><span class="st">"tree.root"</span><span class="op">);</span></span></code></pre>
</div>
<p>We’ll make use of the built-in member functions to <code>TFile</code>
to pull out the <code>TTree</code> named <code>t1</code>. There’s a few
other things to note.</p>
<p>First, we’re going to assign it to a local variable named
<code>input_tree</code>. This is to emphasize that <code>t1</code> is
just a string that refers to the name of the object stored in the
<code>TFile</code> and that we can assign it to any variable name, not
just one named <code>t1</code>.</p>
<p>The second thing to note is that we are going to create a
<em>pointer</em> to <code>input_tree</code>, which makes some of the
memory management easier. This means that we precede our variable name
with an asterix <code>*</code>, we have to cast the object pulled out of
the <code>TFile</code> as a <code>TTree</code> pointer
(<code>TTree*</code>), and subsequent uses of <code>input_tree</code>
will access data members and member functions with the
<code>-&gt;</code> operator rather than a period <code>.</code>.</p>
<p>If you want to learn more about pointers, there are <a href="https://www.cplusplus.com/doc/tutorial/pointers/" class="external-link">many</a>, <a href="https://www.w3schools.com/cpp/cpp_pointers.asp" class="external-link">many</a>, <a href="https://www.tutorialspoint.com/cplusplus/cpp_pointers.htm" class="external-link">resources</a>
out there.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>   <span class="co">// We will now "Get" the tree from the file and assign it to</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>   <span class="co">// a new local variable.</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>   TTree <span class="op">*</span>input_tree <span class="op">=</span> <span class="op">(</span>TTree<span class="op">*)</span>f<span class="op">.</span>Get<span class="op">(</span><span class="st">"t1"</span><span class="op">);</span></span></code></pre>
</div>
<p>Just as we did in the <code>write_ROOT_file.cc</code> example, we
will define some local variables. These variables will actually get
“filled” by the ROOT file when we loop over the events.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>   <span class="dt">Float_t</span> met<span class="op">;</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>   <span class="dt">Int_t</span> njets<span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>   <span class="dt">Float_t</span> pt<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>   <span class="dt">Float_t</span> eta<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>   <span class="dt">Float_t</span> phi<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span></code></pre>
</div>
<p>We’ll now assign these local variables to specific
<code>TBranch</code>es in <code>input_tree</code>. Note that we’ll be
using the <em>address</em> of each local variable when we precede the
variable name with an ampersand <code>&amp;</code>.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>   <span class="co">// Assign these variables to specific branch addresses</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>   input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"met"</span><span class="op">,</span> <span class="op">&amp;</span>met<span class="op">);</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>   input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"njets"</span><span class="op">,</span> <span class="op">&amp;</span>njets<span class="op">);</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>   input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"pt"</span><span class="op">,</span> <span class="op">&amp;</span>pt<span class="op">);</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>   input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"eta"</span><span class="op">,</span> <span class="op">&amp;</span>eta<span class="op">);</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>   input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"phi"</span><span class="op">,</span> <span class="op">&amp;</span>phi<span class="op">);</span></span></code></pre>
</div>
<p>We’re ready now to loop over events! Each time we call
<code>input_tree-&gt;GetEntry(i)</code>, it pulls the <code>i</code>th
values out of <code>input_tree</code> and “fills” the local variables
with those values.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>  <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>nevents<span class="op">;</span>i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>       <span class="co">// Get the values for the i`th event and fill all our local variables</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>       <span class="co">// that were assigned to TBranches</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>       input_tree<span class="op">-&gt;</span>GetEntry<span class="op">(</span>i<span class="op">);</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>       <span class="co">// Print the number of jets in this event</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>       printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> njets<span class="op">);</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>       <span class="co">// Print out the momentum for each jet in this event</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>       <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> j<span class="op">=</span><span class="dv">0</span><span class="op">;</span> j<span class="op">&lt;</span>njets<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>           printf<span class="op">(</span><span class="st">"</span><span class="sc">%f</span><span class="st">, </span><span class="sc">%f</span><span class="st">, </span><span class="sc">%f\n</span><span class="st">"</span><span class="op">,</span> pt<span class="op">[</span>j<span class="op">],</span> eta<span class="op">[</span>j<span class="op">],</span> phi<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>       <span class="op">}</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a>   <span class="op">}</span></span></code></pre>
</div>
<p>The final version of your <code>read_ROOT_file.cc</code> should look
like this:</p>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Full source code file for read_ROOT_file.cc
  </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" aria-labelledby="headingSpoiler3" data-bs-parent="#accordionSpoiler3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdio&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdlib&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TROOT.h"</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TTree.h"</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TFile.h"</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TRandom.h"</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>  <span class="co">// Here's the input file</span></span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>  <span class="co">// Without the 'recreate' argument, ROOT will assume this file exists to be read in.</span></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>  TFile f<span class="op">(</span><span class="st">"tree.root"</span><span class="op">);</span></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a>  <span class="co">// We will now "Get" the tree from the file and assign it to</span></span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>  <span class="co">// a new local variable.</span></span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a>  TTree <span class="op">*</span>input_tree <span class="op">=</span> <span class="op">(</span>TTree<span class="op">*)</span>f<span class="op">.</span>Get<span class="op">(</span><span class="st">"t1"</span><span class="op">);</span></span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a></span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>  <span class="dt">Float_t</span> met<span class="op">;</span> <span class="co">// Missing energy in the transverse direction.</span></span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a></span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a>  <span class="dt">Int_t</span> njets<span class="op">;</span> <span class="co">// Necessary to keep track of the number of jets</span></span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a></span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a>  <span class="co">// We'll define these assuming we will not write information for</span></span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a>  <span class="co">// more than 16 jets. We'll have to check for this in the code otherwise</span></span>
<span id="cb21-26"><a href="#cb21-26" tabindex="-1"></a>  <span class="co">// it could crash!</span></span>
<span id="cb21-27"><a href="#cb21-27" tabindex="-1"></a>  <span class="dt">Float_t</span> pt<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb21-28"><a href="#cb21-28" tabindex="-1"></a>  <span class="dt">Float_t</span> eta<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb21-29"><a href="#cb21-29" tabindex="-1"></a>  <span class="dt">Float_t</span> phi<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb21-30"><a href="#cb21-30" tabindex="-1"></a></span>
<span id="cb21-31"><a href="#cb21-31" tabindex="-1"></a>  <span class="co">// Assign these variables to specific branch addresses</span></span>
<span id="cb21-32"><a href="#cb21-32" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"met"</span><span class="op">,</span> <span class="op">&amp;</span>met<span class="op">);</span></span>
<span id="cb21-33"><a href="#cb21-33" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"njets"</span><span class="op">,</span> <span class="op">&amp;</span>njets<span class="op">);</span></span>
<span id="cb21-34"><a href="#cb21-34" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"pt"</span><span class="op">,</span> <span class="op">&amp;</span>pt<span class="op">);</span></span>
<span id="cb21-35"><a href="#cb21-35" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"eta"</span><span class="op">,</span> <span class="op">&amp;</span>eta<span class="op">);</span></span>
<span id="cb21-36"><a href="#cb21-36" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"phi"</span><span class="op">,</span> <span class="op">&amp;</span>phi<span class="op">);</span></span>
<span id="cb21-37"><a href="#cb21-37" tabindex="-1"></a></span>
<span id="cb21-38"><a href="#cb21-38" tabindex="-1"></a>  <span class="co">// Get the number of events in the file</span></span>
<span id="cb21-39"><a href="#cb21-39" tabindex="-1"></a>  <span class="dt">Int_t</span> nevents <span class="op">=</span> input_tree<span class="op">-&gt;</span>GetEntries<span class="op">();</span></span>
<span id="cb21-40"><a href="#cb21-40" tabindex="-1"></a></span>
<span id="cb21-41"><a href="#cb21-41" tabindex="-1"></a>  <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>nevents<span class="op">;</span>i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb21-42"><a href="#cb21-42" tabindex="-1"></a></span>
<span id="cb21-43"><a href="#cb21-43" tabindex="-1"></a>      <span class="co">// Get the values for the i`th event and fill all our local variables</span></span>
<span id="cb21-44"><a href="#cb21-44" tabindex="-1"></a>      <span class="co">// that were assigned to TBranches</span></span>
<span id="cb21-45"><a href="#cb21-45" tabindex="-1"></a>      input_tree<span class="op">-&gt;</span>GetEntry<span class="op">(</span>i<span class="op">);</span></span>
<span id="cb21-46"><a href="#cb21-46" tabindex="-1"></a></span>
<span id="cb21-47"><a href="#cb21-47" tabindex="-1"></a>      <span class="co">// Print the number of jets in this event</span></span>
<span id="cb21-48"><a href="#cb21-48" tabindex="-1"></a>      printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span>njets<span class="op">);</span></span>
<span id="cb21-49"><a href="#cb21-49" tabindex="-1"></a></span>
<span id="cb21-50"><a href="#cb21-50" tabindex="-1"></a>      <span class="co">// Print out the momentum for each jet in this event</span></span>
<span id="cb21-51"><a href="#cb21-51" tabindex="-1"></a>      <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> j<span class="op">=</span><span class="dv">0</span><span class="op">;</span> j<span class="op">&lt;</span>njets<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb21-52"><a href="#cb21-52" tabindex="-1"></a>          printf<span class="op">(</span><span class="st">"</span><span class="sc">%f</span><span class="st">, </span><span class="sc">%f</span><span class="st">, </span><span class="sc">%f\n</span><span class="st">"</span><span class="op">,</span> pt<span class="op">[</span>j<span class="op">],</span> eta<span class="op">[</span>j<span class="op">],</span> phi<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb21-53"><a href="#cb21-53" tabindex="-1"></a>      <span class="op">}</span></span>
<span id="cb21-54"><a href="#cb21-54" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb21-55"><a href="#cb21-55" tabindex="-1"></a></span>
<span id="cb21-56"><a href="#cb21-56" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb21-57"><a href="#cb21-57" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Now we need to modify our <code>Makefile</code> to compile this code.
We edit it so that it looks like this.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MAKEFILE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode makefile" tabindex="0"><code class="sourceCode makefile"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="dt">CC</span><span class="ch">=</span><span class="st">g++</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="dt">CFLAGS</span><span class="ch">=</span><span class="st">-c -g -Wall `root-config --cflags`</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="dt">LDFLAGS</span><span class="ch">=</span><span class="st">`root-config --glibs`</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="dv">all:</span><span class="dt"> write_ROOT_file read_ROOT_file</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a><span class="dv">write_ROOT_file:</span><span class="dt"> write_ROOT_file.cc</span></span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o write_ROOT_file.o write_ROOT_file.cc</span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a>    <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> -o write_ROOT_file write_ROOT_file.o <span class="ch">$(</span><span class="dt">LDFLAGS</span><span class="ch">)</span></span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a><span class="dv">read_ROOT_file:</span><span class="dt"> read_ROOT_file.cc</span></span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o read_ROOT_file.o read_ROOT_file.cc</span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a>    <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> -o read_ROOT_file read_ROOT_file.o <span class="ch">$(</span><span class="dt">LDFLAGS</span><span class="ch">)</span></span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a></span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a><span class="dv">clean:</span></span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a><span class="er">    </span>rm -f ./*~ ./*.o ./write_ROOT_file</span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a>    rm -f ./*~ ./*.o ./read_ROOT_file</span></code></pre>
</div>
<p>We can now compile and run the code in your <code>my_root</code>
container shell!</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">make</span> read_ROOT_file</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="ex">./read_ROOT_file</span></span></code></pre>
</div>
<p>We get a lot of output! However it should look something like the
following, keeping in mind your numbers will be different because of the
random numbers that make up the values.</p>
<div id="accordionSpoiler4" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler4" aria-expanded="false" aria-controls="collapseSpoiler4">
  <h3 class="accordion-header" id="headingSpoiler4">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Output of read_ROOT_file
  </h3>
</button>
<div id="collapseSpoiler4" class="accordion-collapse collapse" aria-labelledby="headingSpoiler4" data-bs-parent="#accordionSpoiler4">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1
85.105431, 5.602912, 0.501085
1
18.954712, 4.375443, -1.546321
1
39.784435, 5.165263, 2.592412
3
80.748314, 0.387768, 1.786288
52.971573, 3.939434, 2.484405
12.969198, 3.115963, 0.910543
3
93.604256, 0.737315, -0.647755
86.382034, 3.493269, -1.573663
68.181541, 3.658454, -1.206015
3
96.990395, 5.839735, 3.046098
79.096542, 4.515290, 0.039709
83.234497, 4.990829, 2.586360
4
60.880657, 1.233623, -2.837789
25.723198, 4.751074, 2.355202
20.403908, 4.656353, -2.171340
18.961079, 1.425917, 2.016828</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Awesome! You’ve now written and read in a very simple ROOT file!
There is obviously much more that can be done, but this should give you
the basics of interfacing with ROOT <code>TFile</code>s and
<code>TTree</code>s.</p>
<p>You’ll see some version of this code when using <em>analyzers</em> to
run over the open data code. At that point, you can write out subsets of
the data to new ROOT files or even simply dump the data to a text or
.csv file.</p>
<p>In the next section, we’ll take a quick look at how to read in a file
and make a few histograms, still using the C++ syntax.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>ROOT defines the file format in which all of the CMS Open Data is
stored.</li>
<li>These files can be accessed quickly using C++ code and the relevant
information can be dumped out into other formats.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-04-root-and-cpp-fill-a-histogram"><p>Content from <a href="04-root-and-cpp-fill-a-histogram.html">Using ROOT with C++ to fill a histogram</a></p>
<hr>
<p>Last updated on 2024-07-09 |

        <a href="https://github.com/cms-opendata-workshop/workbench-template-md/edit/main/episodes/04-root-and-cpp-fill-a-histogram.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 30 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Is there more than reading and writing files that can be done with
ROOT?</li>
<li>How do I run a ROOT script?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn to fill a histogram and save it to a file.</li>
<li>Learn to run a simple ROOT script</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="filling-a-histogram">Filling a histogram<a class="anchor" aria-label="anchor" href="#filling-a-histogram"></a>
<a class="anchor" aria-label="anchor" href="#filling-a-histogram"></a>
</h2>
<hr class="half-width">
<p>ROOT can easily fill a histogram as you are looping over individual
events. Let’s try creating and filling a histogram with the transverse
momentum values. We’ll start with the <code>read_ROOT_file.cc</code>
code we wrote in the previous episode and copy what we have to a new
file, <code>fill_histogram.cc</code>.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">cp</span> read_ROOT_file.cc fill_histogram.cc</span></code></pre>
</div>
<p>Into this file, we’ll add some lines at some key spots. Again, use
your favourite editor on your local computer. For now, we’ll go through
those lines of code individually, and then show you the completed file
at the end to see where they went.</p>
<p>First we need to include the header file for the ROOT <a href="https://root.cern.ch/doc/master/classTH1F.html" class="external-link">TH1F</a>
class.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TH1F.h"</span></span></code></pre>
</div>
<p>We create an output file to store the histogram in.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>   <span class="co">// Let's make an output file which we'll use to save our</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>   <span class="co">// histogram</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>   TFile fout<span class="op">(</span><span class="st">"output.root"</span><span class="op">,</span><span class="st">"recreate"</span><span class="op">);</span></span></code></pre>
</div>
<p>Define the histogram.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>   <span class="co">// We define an histogram for the transverse momentum of the jets</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>   <span class="co">// The arguments are as follow</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>   <span class="co">// * Internal name of the histogram</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>   <span class="co">// * Title that will be used if the histogram is plotted</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>   <span class="co">// * Number of bins</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>   <span class="co">// * Low edge of the lowest bin</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>   <span class="co">// * High edge of the highest bin</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>   TH1F h1<span class="op">(</span><span class="st">"h1"</span><span class="op">,</span><span class="st">"jet pT (GeV/c)"</span><span class="op">,</span><span class="dv">50</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">150</span><span class="op">);</span></span></code></pre>
</div>
<p>And then <em>inside the event loop</em>, we fill the histogram each
time we get a new value for the transverse momentum.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>         <span class="co">// Fill the histogram with each value of pT</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>         h1<span class="op">.</span>Fill<span class="op">(</span>pt<span class="op">[</span>j<span class="op">]);</span></span></code></pre>
</div>
<p>Before we leave the function, we “change directory” to the output
file, write the histogram to the file, and then close the output
file.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>   fout<span class="op">.</span>cd<span class="op">();</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>   h1<span class="op">.</span>Write<span class="op">();</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>   fout<span class="op">.</span>Close<span class="op">();</span></span></code></pre>
</div>
<p>The final version of <code>fill_histogram.cc</code> will look like
this:</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Source code for fill_histogram.cc
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="pp">#include</span><span class="im">&lt;cstdio&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="pp">#include</span><span class="im">&lt;cstdlib&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="pp">#include</span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TROOT.h"</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TTree.h"</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TFile.h"</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TRandom.h"</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TH1F.h"</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>  <span class="co">// Here's the input file</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>  <span class="co">// Without the 'recreate' argument, ROOT will assume this file exists to be read in.</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>  TFile f<span class="op">(</span><span class="st">"tree.root"</span><span class="op">);</span></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>  <span class="co">// Let's make an output file which we'll use to save our</span></span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a>  <span class="co">// histogram</span></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a>  TFile fout<span class="op">(</span><span class="st">"output.root"</span><span class="op">,</span><span class="st">"recreate"</span><span class="op">);</span></span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a>  <span class="co">// We define an histogram for the transverse momentum of the jets</span></span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a>  <span class="co">// The arguments are as follow</span></span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a>  <span class="co">// * Internal name of the histogram</span></span>
<span id="cb7-24"><a href="#cb7-24" tabindex="-1"></a>  <span class="co">// * Title that will be used if the histogram is plotted</span></span>
<span id="cb7-25"><a href="#cb7-25" tabindex="-1"></a>  <span class="co">// * Number of bins</span></span>
<span id="cb7-26"><a href="#cb7-26" tabindex="-1"></a>  <span class="co">// * Low edge of the lowest bin</span></span>
<span id="cb7-27"><a href="#cb7-27" tabindex="-1"></a>  <span class="co">// * High edge of the highest bin</span></span>
<span id="cb7-28"><a href="#cb7-28" tabindex="-1"></a>  TH1F h1<span class="op">(</span><span class="st">"h1"</span><span class="op">,</span><span class="st">"jet pT (GeV/c)"</span><span class="op">,</span><span class="dv">50</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">150</span><span class="op">);</span></span>
<span id="cb7-29"><a href="#cb7-29" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" tabindex="-1"></a>  <span class="co">// We will now "Get" the tree from the file and assign it to</span></span>
<span id="cb7-31"><a href="#cb7-31" tabindex="-1"></a>  <span class="co">// a new local variable.</span></span>
<span id="cb7-32"><a href="#cb7-32" tabindex="-1"></a>  TTree <span class="op">*</span>input_tree <span class="op">=</span> <span class="op">(</span>TTree<span class="op">*)</span>f<span class="op">.</span>Get<span class="op">(</span><span class="st">"t1"</span><span class="op">);</span></span>
<span id="cb7-33"><a href="#cb7-33" tabindex="-1"></a></span>
<span id="cb7-34"><a href="#cb7-34" tabindex="-1"></a>  <span class="dt">Float_t</span> met<span class="op">;</span> <span class="co">// Missing energy in the transverse direction.</span></span>
<span id="cb7-35"><a href="#cb7-35" tabindex="-1"></a></span>
<span id="cb7-36"><a href="#cb7-36" tabindex="-1"></a>  <span class="dt">Int_t</span> njets<span class="op">;</span> <span class="co">// Necessary to keep track of the number of jets</span></span>
<span id="cb7-37"><a href="#cb7-37" tabindex="-1"></a>  <span class="co">// We'll define these assuming we will not write information for</span></span>
<span id="cb7-38"><a href="#cb7-38" tabindex="-1"></a>  <span class="co">// more than 16 jets. We'll have to check for this in the code otherwise</span></span>
<span id="cb7-39"><a href="#cb7-39" tabindex="-1"></a>  <span class="co">// it could crash!</span></span>
<span id="cb7-40"><a href="#cb7-40" tabindex="-1"></a>  <span class="dt">Float_t</span> pt<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb7-41"><a href="#cb7-41" tabindex="-1"></a>  <span class="dt">Float_t</span> eta<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb7-42"><a href="#cb7-42" tabindex="-1"></a>  <span class="dt">Float_t</span> phi<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb7-43"><a href="#cb7-43" tabindex="-1"></a></span>
<span id="cb7-44"><a href="#cb7-44" tabindex="-1"></a>  <span class="co">// Assign these variables to specific branch addresses</span></span>
<span id="cb7-45"><a href="#cb7-45" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"met"</span><span class="op">,&amp;</span>met<span class="op">);</span></span>
<span id="cb7-46"><a href="#cb7-46" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"njets"</span><span class="op">,&amp;</span>njets<span class="op">);</span></span>
<span id="cb7-47"><a href="#cb7-47" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"pt"</span><span class="op">,&amp;</span>pt<span class="op">);</span></span>
<span id="cb7-48"><a href="#cb7-48" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"eta"</span><span class="op">,&amp;</span>eta<span class="op">);</span></span>
<span id="cb7-49"><a href="#cb7-49" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"phi"</span><span class="op">,&amp;</span>phi<span class="op">);</span></span>
<span id="cb7-50"><a href="#cb7-50" tabindex="-1"></a></span>
<span id="cb7-51"><a href="#cb7-51" tabindex="-1"></a>  <span class="co">// Get the number of events in the file</span></span>
<span id="cb7-52"><a href="#cb7-52" tabindex="-1"></a>  <span class="dt">Int_t</span> nevents <span class="op">=</span> input_tree<span class="op">-&gt;</span>GetEntries<span class="op">();</span></span>
<span id="cb7-53"><a href="#cb7-53" tabindex="-1"></a></span>
<span id="cb7-54"><a href="#cb7-54" tabindex="-1"></a>  <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>nevents<span class="op">;</span>i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb7-55"><a href="#cb7-55" tabindex="-1"></a></span>
<span id="cb7-56"><a href="#cb7-56" tabindex="-1"></a>      <span class="co">// Get the values for the i`th event and fill all our local variables</span></span>
<span id="cb7-57"><a href="#cb7-57" tabindex="-1"></a>      <span class="co">// that were assigned to TBranches</span></span>
<span id="cb7-58"><a href="#cb7-58" tabindex="-1"></a>      input_tree<span class="op">-&gt;</span>GetEntry<span class="op">(</span>i<span class="op">);</span></span>
<span id="cb7-59"><a href="#cb7-59" tabindex="-1"></a></span>
<span id="cb7-60"><a href="#cb7-60" tabindex="-1"></a>      <span class="co">// Print the number of jets in this event</span></span>
<span id="cb7-61"><a href="#cb7-61" tabindex="-1"></a>      printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span>njets<span class="op">);</span></span>
<span id="cb7-62"><a href="#cb7-62" tabindex="-1"></a></span>
<span id="cb7-63"><a href="#cb7-63" tabindex="-1"></a>      <span class="co">// Print out the momentum for each jet in this event</span></span>
<span id="cb7-64"><a href="#cb7-64" tabindex="-1"></a>      <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> j<span class="op">=</span><span class="dv">0</span><span class="op">;</span>j<span class="op">&lt;</span>njets<span class="op">;</span>j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb7-65"><a href="#cb7-65" tabindex="-1"></a>          printf<span class="op">(</span><span class="st">"</span><span class="sc">%f</span><span class="st">,</span><span class="sc">%f</span><span class="st">,</span><span class="sc">%f\n</span><span class="st">"</span><span class="op">,</span>pt<span class="op">[</span>j<span class="op">],</span> eta<span class="op">[</span>j<span class="op">],</span> phi<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb7-66"><a href="#cb7-66" tabindex="-1"></a></span>
<span id="cb7-67"><a href="#cb7-67" tabindex="-1"></a>          <span class="co">// Fill the histogram with each value of pT</span></span>
<span id="cb7-68"><a href="#cb7-68" tabindex="-1"></a>          h1<span class="op">.</span>Fill<span class="op">(</span>pt<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb7-69"><a href="#cb7-69" tabindex="-1"></a>      <span class="op">}</span></span>
<span id="cb7-70"><a href="#cb7-70" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb7-71"><a href="#cb7-71" tabindex="-1"></a></span>
<span id="cb7-72"><a href="#cb7-72" tabindex="-1"></a>  fout<span class="op">.</span>cd<span class="op">();</span></span>
<span id="cb7-73"><a href="#cb7-73" tabindex="-1"></a>  h1<span class="op">.</span>Write<span class="op">();</span></span>
<span id="cb7-74"><a href="#cb7-74" tabindex="-1"></a>  fout<span class="op">.</span>Close<span class="op">();</span></span>
<span id="cb7-75"><a href="#cb7-75" tabindex="-1"></a></span>
<span id="cb7-76"><a href="#cb7-76" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-77"><a href="#cb7-77" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>We will modify our <code>Makefile</code> accordingly.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MAKEFILE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode makefile" tabindex="0"><code class="sourceCode makefile"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="dt">CC</span><span class="ch">=</span><span class="st">g++</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="dt">CFLAGS</span><span class="ch">=</span><span class="st">-c -g -Wall `root-config --cflags`</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="dt">LDFLAGS</span><span class="ch">=</span><span class="st">`root-config --glibs`</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="dv">all:</span><span class="dt"> write_ROOT_file read_ROOT_file fill_histogram</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="dv">write_ROOT_file:</span><span class="dt"> write_ROOT_file.cc</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o write_ROOT_file.o write_ROOT_file.cc</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>    <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> -o write_ROOT_file write_ROOT_file.o <span class="ch">$(</span><span class="dt">LDFLAGS</span><span class="ch">)</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="dv">read_ROOT_file:</span><span class="dt"> read_ROOT_file.cc</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o read_ROOT_file.o read_ROOT_file.cc</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>    <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> -o read_ROOT_file read_ROOT_file.o <span class="ch">$(</span><span class="dt">LDFLAGS</span><span class="ch">)</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="dv">fill_histogram:</span><span class="dt"> fill_histogram.cc</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o fill_histogram.o fill_histogram.cc</span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>    <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> -o fill_histogram fill_histogram.o <span class="ch">$(</span><span class="dt">LDFLAGS</span><span class="ch">)</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a><span class="dv">clean:</span></span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a><span class="er">    </span>rm -f ./*~ ./*.o ./write_ROOT_file</span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a>    rm -f ./*~ ./*.o ./read_ROOT_file</span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a>    rm -f ./*~ ./*.o ./fill_histogram</span></code></pre>
</div>
<p>And then compile and run it, remember to do it in the container!</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">make</span> fill_histogram</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="ex">./fill_histogram</span></span></code></pre>
</div>
<p>The output on the screen should not look different. However, if you
list the contents of the directory, you’ll see a new file,
<code>output.root</code>!</p>
<p>If you are using a container with VNC, now it is time to start the
graphics window with</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">start_vnc</span></span></code></pre>
</div>
<p>and connect to it with the default password
<code>cms.cern</code>.</p>
<p>To inspect this new ROOT file, we’ll launch CINT for the first time
and create a <a href="https://root.cern.ch/doc/master/classTBrowser.html" class="external-link"><code>TBrowser</code>
object</a>.</p>
<p>On the command line, run the following to launch CINT and attach our
new ROOT file.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">root</span> <span class="at">-l</span> output.root</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>root [0]
Attaching file output.root as _file0...
root [1]</code></pre>
</div>
<p>You can either type C++/ROOT commands or launch a
<code>TBrowser</code>, which is a graphical tool to inspect ROOT files.
Inside this CINT environment, type the following (without the
<code>root [1]</code>, as that is just the ROOT/CINT prompt).</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>root <span class="op">[</span><span class="dv">1</span><span class="op">]</span> TBrowser b<span class="op">;</span></span></code></pre>
</div>
<p>You should see the <code>TBrowser</code> pop up!</p>
<div id="tbrowser" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tbrowser" class="callout-inner">
<h3 class="callout-title">TBrowser<a class="anchor" aria-label="anchor" href="#tbrowser"></a>
</h3>
<div class="callout-content">
<figure><img src="../fig/tbrowser_screenshot_00.png" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<p>If we double click on <code>output.root</code>, in the left-hand menu
and then the <code>h1;1</code> that appears below it, we should see the
following plot appear!</p>
<div id="inspecting-the-root-file-contents" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="inspecting-the-root-file-contents" class="callout-inner">
<h3 class="callout-title">Inspecting the ROOT file contents<a class="anchor" aria-label="anchor" href="#inspecting-the-root-file-contents"></a>
</h3>
<div class="callout-content">
<figure><img src="../fig/tbrowser_screenshot_01.png" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<p>Quit ROOT by choosing the “Quit Root” option from Browser menu of the
TBrowser window or by typing <code>.q</code> in the ROOT prompt.</p>
<div id="work-assignment-investigating-data-in-root-files" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="work-assignment-investigating-data-in-root-files" class="callout-inner">
<h3 class="callout-title">Work assignment: investigating data in ROOT files<a class="anchor" aria-label="anchor" href="#work-assignment-investigating-data-in-root-files"></a>
</h3>
<div class="callout-content">
<p>In the previous episode you generated a file called
<code>tree.root</code>. It has some variables which were stored in a
TTree called <code>t1</code>. Let’s explore the variables contained in
this tree by using one of the methods available for TTree objects. You
can find out more about these methods directly from the <a href="https://root.cern.ch/doc/master/classTTree.html" class="external-link">ROOT TTree class
documentation</a>.</p>
<p>Open the <code>tree.root</code> file with ROOT:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">root</span> <span class="at">-l</span> tree.root</span></code></pre>
</div>
<p>Now, dump the content of the <code>t1</code> tree with the method
<code>Print</code>. Note that, by opening the file, the ROOT tree in
there is automatically loaded.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>root <span class="op">[</span><span class="dv">0</span><span class="op">]</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>Attaching file tree<span class="op">.</span>root as _file0<span class="op">...</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>root <span class="op">[</span><span class="dv">1</span><span class="op">]</span> t1<span class="op">-&gt;</span>Print<span class="op">()</span></span></code></pre>
</div>
<p>Please copy the output this statement generates and paste it into the
corresponding section in our <a href="https://docs.google.com/forms/d/e/1FAIpQLSdxsc-aIWqUyFA0qTsnbfQrA6wROtAxC5Id4sxH08STTl8e5w/viewform" class="external-link">assignment
form</a>; remember you must sign in and
<strong style="color: red;">click on the submit button</strong> in order
to save your work. You can go back to edit the form at any time. Then,
quit ROOT.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="using-a-root-script">Using a ROOT script<a class="anchor" aria-label="anchor" href="#using-a-root-script"></a>
<a class="anchor" aria-label="anchor" href="#using-a-root-script"></a>
</h2>
<hr class="half-width">
<p>We could also loop over all the events, create and save the
histogram, but also draw the histogram onto a <code>TCanvas</code>
object and have it pop up, all from a ROOT script and the CINT.</p>
<p>First, let’s copy over our C++ source code into a C++ script.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">cp</span> fill_histogram.cc fill_histogram_SCRIPT.C</span></code></pre>
</div>
<p>Next we’ll remove the headers at the beginning and even get rid of
the <code>int main</code> designation, though we keep the curly
brackets.</p>
<p>We’ll also define a <code>TCanvas</code> object on which we’ll plot
our histogram. After we do that, we “change directory” to the canvas and
draw our histogram. We can even save it to a <code>.png</code> file.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>   <span class="co">// Declare a TCanvas with the following arguments</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>   <span class="co">// * Internal name of the TCanvas object</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>   <span class="co">// * Title to be displayed when it is drawn</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>   <span class="co">// * Width of the canvas</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>   <span class="co">// * Height of the canvas</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>   TCanvas <span class="op">*</span>c1 <span class="op">=</span> <span class="kw">new</span> TCanvas<span class="op">(</span><span class="st">"c1"</span><span class="op">,</span> <span class="st">"Canvas on which to display our histogram"</span><span class="op">,</span> <span class="dv">800</span><span class="op">,</span> <span class="dv">400</span><span class="op">);</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>   c1<span class="op">-&gt;</span>cd<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>   h1<span class="op">.</span>Draw<span class="op">();</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>   c1<span class="op">-&gt;</span>SaveAs<span class="op">(</span><span class="st">"h_pt.png"</span><span class="op">);</span></span></code></pre>
</div>
<p>Your <code>fill_histogram_SCRIPT.C</code> should look like this:</p>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Source code for fill_histogram_SCRIPT.C
  </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  <span class="co">// Here's the input file</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>  <span class="co">// Without the 'recreate' argument, ROOT will assume this file exists to be read in.</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>  TFile f<span class="op">(</span><span class="st">"tree.root"</span><span class="op">);</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>  <span class="co">// Let's make an output file which we'll use to save our</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>  <span class="co">// histogram</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>  TFile fout<span class="op">(</span><span class="st">"output.root"</span><span class="op">,</span><span class="st">"recreate"</span><span class="op">);</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a>  <span class="co">// We define an histogram for the transverse momentum of the jets</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>  <span class="co">// The arguments are as follow</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a>  <span class="co">// * Internal name of the histogram</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a>  <span class="co">// * Title that will be used if the histogram is plotted</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a>  <span class="co">// * Number of bins</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a>  <span class="co">// * Low edge of the lowest bin</span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a>  <span class="co">// * High edge of the highest bin</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a>  TH1F h1<span class="op">(</span><span class="st">"h1"</span><span class="op">,</span><span class="st">"jet pT (GeV/c)"</span><span class="op">,</span><span class="dv">50</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">150</span><span class="op">);</span></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a>  <span class="co">// We will now "Get" the tree from the file and assign it to</span></span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a>  <span class="co">// a new local variable.</span></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a>  TTree <span class="op">*</span>input_tree <span class="op">=</span> <span class="op">(</span>TTree<span class="op">*)</span>f<span class="op">.</span>Get<span class="op">(</span><span class="st">"t1"</span><span class="op">);</span></span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a></span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a>  <span class="dt">Float_t</span> met<span class="op">;</span> <span class="co">// Missing energy in the transverse direction.</span></span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a></span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a>  <span class="dt">Int_t</span> njets<span class="op">;</span> <span class="co">// Necessary to keep track of the number of jets</span></span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a></span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a>  <span class="co">// We'll define these assuming we will not write information for</span></span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a>  <span class="co">// more than 16 jets. We'll have to check for this in the code otherwise</span></span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a>  <span class="co">// it could crash!</span></span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a>  <span class="dt">Float_t</span> pt<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a>  <span class="dt">Float_t</span> eta<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb18-33"><a href="#cb18-33" tabindex="-1"></a>  <span class="dt">Float_t</span> phi<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb18-34"><a href="#cb18-34" tabindex="-1"></a></span>
<span id="cb18-35"><a href="#cb18-35" tabindex="-1"></a>     <span class="co">// Assign these variables to specific branch addresses</span></span>
<span id="cb18-36"><a href="#cb18-36" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"met"</span><span class="op">,&amp;</span>met<span class="op">);</span></span>
<span id="cb18-37"><a href="#cb18-37" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"njets"</span><span class="op">,&amp;</span>njets<span class="op">);</span></span>
<span id="cb18-38"><a href="#cb18-38" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"pt"</span><span class="op">,&amp;</span>pt<span class="op">);</span></span>
<span id="cb18-39"><a href="#cb18-39" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"eta"</span><span class="op">,&amp;</span>eta<span class="op">);</span></span>
<span id="cb18-40"><a href="#cb18-40" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"phi"</span><span class="op">,&amp;</span>phi<span class="op">);</span></span>
<span id="cb18-41"><a href="#cb18-41" tabindex="-1"></a></span>
<span id="cb18-42"><a href="#cb18-42" tabindex="-1"></a>  <span class="co">// Get the number of events in the file</span></span>
<span id="cb18-43"><a href="#cb18-43" tabindex="-1"></a>  <span class="dt">Int_t</span> nevents <span class="op">=</span> input_tree<span class="op">-&gt;</span>GetEntries<span class="op">();</span></span>
<span id="cb18-44"><a href="#cb18-44" tabindex="-1"></a></span>
<span id="cb18-45"><a href="#cb18-45" tabindex="-1"></a>  <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>nevents<span class="op">;</span>i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb18-46"><a href="#cb18-46" tabindex="-1"></a></span>
<span id="cb18-47"><a href="#cb18-47" tabindex="-1"></a>      <span class="co">// Get the values for the i`th event and fill all our local variables</span></span>
<span id="cb18-48"><a href="#cb18-48" tabindex="-1"></a>      <span class="co">// that were assigned to TBranches</span></span>
<span id="cb18-49"><a href="#cb18-49" tabindex="-1"></a>      input_tree<span class="op">-&gt;</span>GetEntry<span class="op">(</span>i<span class="op">);</span></span>
<span id="cb18-50"><a href="#cb18-50" tabindex="-1"></a></span>
<span id="cb18-51"><a href="#cb18-51" tabindex="-1"></a>      <span class="co">// Print the number of jets in this event</span></span>
<span id="cb18-52"><a href="#cb18-52" tabindex="-1"></a>      printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span>njets<span class="op">);</span></span>
<span id="cb18-53"><a href="#cb18-53" tabindex="-1"></a></span>
<span id="cb18-54"><a href="#cb18-54" tabindex="-1"></a>      <span class="co">// Print out the momentum for each jet in this event</span></span>
<span id="cb18-55"><a href="#cb18-55" tabindex="-1"></a>      <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> j<span class="op">=</span><span class="dv">0</span><span class="op">;</span>j<span class="op">&lt;</span>njets<span class="op">;</span>j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb18-56"><a href="#cb18-56" tabindex="-1"></a>          printf<span class="op">(</span><span class="st">"</span><span class="sc">%f</span><span class="st">,</span><span class="sc">%f</span><span class="st">,</span><span class="sc">%f\n</span><span class="st">"</span><span class="op">,</span>pt<span class="op">[</span>j<span class="op">],</span> eta<span class="op">[</span>j<span class="op">],</span> phi<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb18-57"><a href="#cb18-57" tabindex="-1"></a></span>
<span id="cb18-58"><a href="#cb18-58" tabindex="-1"></a>          <span class="co">// Fill the histogram with each value of pT</span></span>
<span id="cb18-59"><a href="#cb18-59" tabindex="-1"></a>          h1<span class="op">.</span>Fill<span class="op">(</span>pt<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb18-60"><a href="#cb18-60" tabindex="-1"></a>      <span class="op">}</span></span>
<span id="cb18-61"><a href="#cb18-61" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb18-62"><a href="#cb18-62" tabindex="-1"></a></span>
<span id="cb18-63"><a href="#cb18-63" tabindex="-1"></a>  <span class="co">// Declare a TCanvas with the following arguments</span></span>
<span id="cb18-64"><a href="#cb18-64" tabindex="-1"></a>  <span class="co">// * Internal name of the TCanvas object</span></span>
<span id="cb18-65"><a href="#cb18-65" tabindex="-1"></a>  <span class="co">// * Title to be displayed when it is drawn</span></span>
<span id="cb18-66"><a href="#cb18-66" tabindex="-1"></a>  <span class="co">// * Width of the canvas</span></span>
<span id="cb18-67"><a href="#cb18-67" tabindex="-1"></a>  <span class="co">// * Height of the canvas</span></span>
<span id="cb18-68"><a href="#cb18-68" tabindex="-1"></a>  TCanvas <span class="op">*</span>c1 <span class="op">=</span> <span class="kw">new</span> TCanvas<span class="op">(</span><span class="st">"c1"</span><span class="op">,</span> <span class="st">"Canvas on which to display our histogram"</span><span class="op">,</span> <span class="dv">800</span><span class="op">,</span> <span class="dv">400</span><span class="op">);</span></span>
<span id="cb18-69"><a href="#cb18-69" tabindex="-1"></a></span>
<span id="cb18-70"><a href="#cb18-70" tabindex="-1"></a>  c1<span class="op">-&gt;</span>cd<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb18-71"><a href="#cb18-71" tabindex="-1"></a>  h1<span class="op">.</span>Draw<span class="op">();</span></span>
<span id="cb18-72"><a href="#cb18-72" tabindex="-1"></a>  c1<span class="op">-&gt;</span>SaveAs<span class="op">(</span><span class="st">"h_pt.png"</span><span class="op">);</span></span>
<span id="cb18-73"><a href="#cb18-73" tabindex="-1"></a></span>
<span id="cb18-74"><a href="#cb18-74" tabindex="-1"></a>  fout<span class="op">.</span>cd<span class="op">();</span></span>
<span id="cb18-75"><a href="#cb18-75" tabindex="-1"></a>  h1<span class="op">.</span>Write<span class="op">();</span></span>
<span id="cb18-76"><a href="#cb18-76" tabindex="-1"></a>  fout<span class="op">.</span>Close<span class="op">();</span></span>
<span id="cb18-77"><a href="#cb18-77" tabindex="-1"></a></span>
<span id="cb18-78"><a href="#cb18-78" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>To run this, you need only type the following on the command
line.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">root</span> <span class="at">-l</span> fill_histogram_SCRIPT.C</span></code></pre>
</div>
<p>You’ll be popped into the CINT environment and you should see the
following plot pop up!</p>
<div id="tbrowser-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tbrowser-1" class="callout-inner">
<h3 class="callout-title">TBrowser<a class="anchor" aria-label="anchor" href="#tbrowser-1"></a>
</h3>
<div class="callout-content">
<figure><img src="../fig/h_pt.png" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<p>Exit from the container. If you are using a container with VNC, first
stop VNC with <code>stop_vnc</code>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>You can quickly inspect your data using just ROOT</li>
<li>A simple ROOT script is often all you need for diagnostic work</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-05-going-further-with-pyroot"><p>Content from <a href="05-going-further-with-pyroot.html">Using ROOT with python</a></p>
<hr>
<p>Last updated on 2024-07-09 |

        <a href="https://github.com/cms-opendata-workshop/workbench-template-md/edit/main/episodes/05-going-further-with-pyroot.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 5 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Can I call ROOT from python?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Find resources for PyROOT</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="pyroot">PyROOT<a class="anchor" aria-label="anchor" href="#pyroot"></a>
<a class="anchor" aria-label="anchor" href="#pyroot"></a>
</h2>
<hr class="half-width">
<p>The PyROOT project started with Wim Lavrijsen in the late `00s and
became very popular, paralleling the rise of more general python tools
within the community. Python has become the primary analysis language
for the majority of HEP experimentalists. It has a rich ecosystem that
is constantly evolving. This is a good thing because it means that
improvements and new tools are always being developed, but it can
sometimes be a challenge to keep up with the latest and greatest
projects! :)</p>
<p>If you want to learn how to use PyROOT, you can go through some
individual examples <a href="https://root.cern.ch/doc/master/group__tutorial__pyroot.html" class="external-link">here</a>,
or a more guided tutorial <a href="https://root.cern/manual/python/" class="external-link">here</a>.</p>
<p>Feel free to challenge yourself to rewrite the previous C++ code
using PyROOT!</p>
</section><section><h2 class="section-heading" id="using-the-python-docker-container">Using the Python docker container<a class="anchor" aria-label="anchor" href="#using-the-python-docker-container"></a>
<a class="anchor" aria-label="anchor" href="#using-the-python-docker-container"></a>
</h2>
<hr class="half-width">
<p>The tools in the Python docker container will allow you to can easily
open and analyze ROOT files. This is useful for when you make use of the
CMS open data tools to skim some subset of the open data and then copy
it to your local laptop, desktop, or perhaps an HPC cluster at your home
institution.</p>
<p>If you completed the <a href="https://cms-opendata-workshop.github.io/workshopwhepp-lesson-docker/" class="external-link">Docker
pre-exercises</a> you should already have worked through <a href="https://cms-opendata-workshop.github.io/workshopwhepp-lesson-docker/03-docker-for-cms-opendata/index.html" class="external-link">this
episode</a>, under <strong>Download the docker images for ROOT and
python tools and start container</strong>, and you will have</p>
<ul>
<li>a working directory <code>cms_open_data_python</code> on your local
computer</li>
<li>a docker container with name <code>my_python</code> created with the
working directory <code>cms_open_data_python</code> mounted into the
<code>/code</code> directory of the container.</li>
</ul>
<p>Start your python container with</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">docker</span> start <span class="at">-i</span> my_python</span></code></pre>
</div>
<p>In the container, you will be in the <code>/code</code> directory and
it shares the files with your local <code>cms_open_data_python</code>
directory.</p>
<div id="if-youre-using-apptainer" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="if-youre-using-apptainer" class="callout-inner">
<h3 class="callout-title">If you’re using apptainer:<a class="anchor" aria-label="anchor" href="#if-youre-using-apptainer"></a>
</h3>
<div class="callout-content">
<p>Whenever you see a <code>docker start</code> instruction, replace it
with <code>apptainer shell</code> to open either the ROOT or Python
container image. The specific commands in this pre-exercise and during
the live workshop will be given for docker, since that is the most
common application. As a general rule, editing of files will be done in
the standard terminal (the containers do not have all text editors!) or
via the jupyter-lab interface, and then commands will be executed inside
the container shell. If you see <code>Singularity&gt;</code> on your
command line, you are ready to run a ROOT or python script.</p>
</div>
</div>
</div>
<p>If you want to test out the installation, from within Docker you can
launch and interactive python session by typing <code>python</code> (in
Docker) and then trying</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> uproot</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="im">import</span> awkward <span class="im">as</span> ak</span></code></pre>
</div>
<p>If you don’t get any errors then congratulations! You have a working
environment and you are ready to perform some HEP analysis with your new
python environment!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>PyROOT is a complete interface to the ROOT libraries</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-06-uproot"><p>Content from <a href="06-uproot.html">Using uproot to open ROOT files</a></p>
<hr>
<p>Last updated on 2024-07-09 |

        <a href="https://github.com/cms-opendata-workshop/workbench-template-md/edit/main/episodes/06-uproot.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 20 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I open a ROOT file with uproot?</li>
<li>How do I explore what is in the file?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use a different library than ROOT to open ROOT files</li>
<li>Get comfortable with a different way of examining ROOT files</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="other-resources">Other resources<a class="anchor" aria-label="anchor" href="#other-resources"></a>
<a class="anchor" aria-label="anchor" href="#other-resources"></a>
</h2>
<hr class="half-width">
<p>Before we go any further, we point out that this episode and the next
are only the <em>most basic</em> introductions to <code>uproot</code>
and <code>awkward</code>. There is a plethora of material that go much
deeper and we list just a few here.</p>
<ul>
<li><a href="https://uproot.readthedocs.io/en/latest/basic.html" class="external-link">Official
uproot documentation</a></li>
<li><a href="https://hsf-training.github.io/hsf-training-uproot-webpage/aio/index.html" class="external-link">HSF
uproot and awkward tutorial</a></li>
<li>
<a href="https://github.com/jpivarski-talks/2020-06-08-uproot-awkward-columnar-hats" class="external-link">Uproot,
awkward, and columnar analysis</a> from Jim Pivarski.</li>
</ul></section><section><h2 class="section-heading" id="how-to-type-these-commands">How to type these commands?<a class="anchor" aria-label="anchor" href="#how-to-type-these-commands"></a>
<a class="anchor" aria-label="anchor" href="#how-to-type-these-commands"></a>
</h2>
<hr class="half-width">
<p>Now that you’ve installed the necessary python modules in your
<code>my_python</code> container you can choose to write and execute the
code however you like. There are a number of options, but we will point
out two here.</p>
<ul>
<li>
<p><a href="https://jupyter.org/" class="external-link">Jupyter notebook</a>. This
provides an editor and an evironment in which to run your python code.
Often you will run the code one <em>cell</em> at a time, but you could
always put all your code in one cell if you prefer. There are many, many
tutorials out there on using Jupyter notebooks and if you chose to use
Jupyter as your editing/executing environment that you have developed
some familiarity with it.</p>
<ul>
<li>In the <code>my_python</code> container, you can start
<code>jupyter-lab</code> with</li>
</ul>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">jupyter-lab</span> <span class="at">--ip</span><span class="op">=</span>0.0.0.0 <span class="at">--no-browser</span></span></code></pre>
</div>
<p>and open the link given in the message on your browser. Choose the
icon under “Notebook”.</p>
</li>
<li><p>Python scripts. In this approach, you edit the equivalent of a
text file and then pass that text file into a python interpreter. For
example, if you edited a file called <code>hello_world.py</code> such
that it contained</p></li>
</ul>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Hello world!"</span>)</span></code></pre>
</div>
<p>You could save the file and then (perhaps in another Terminal
window), execute</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">python</span> hello_world.py</span></code></pre>
</div>
<p>This would interpret your text file as python commands and produce
the output</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Hello world!</code></pre>
</div>
<p>We leave it to you to decide which approach you prefer.</p>
</section><section><h2 class="section-heading" id="open-a-file">Open a file<a class="anchor" aria-label="anchor" href="#open-a-file"></a>
<a class="anchor" aria-label="anchor" href="#open-a-file"></a>
</h2>
<hr class="half-width">
<p>Let’s open a ROOT file! If you’re writing a python script, let’s call
it <code>open_root_file.py</code> and if you’re using a Jupyter
notebook, let’s call it <code>open_root_file.ipynb</code>. If you are
working in the container, you will open and <em>edit</em> the python
script on your local computer and <em>run</em> it in the container, or
you will open a notebook on your jupyter-lab window in the browser.</p>
<p>First we will import the <code>uproot</code> library, as well as some
other standard libraries. These can be the first lines of your python
script or the first cell of your Jupyter notebook.</p>
<p><em>If this is a script, you may want to run
<code>python open_root_file.py</code> every few lines or so to see the
output. If this is a Jupyter notebook, you will want to put each snippet
of code in its own cell and execute them as you go to see the
output.</em></p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pylab <span class="im">as</span> plt</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="im">import</span> uproot</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="im">import</span> awkward <span class="im">as</span> ak</span></code></pre>
</div>
<p>Let’s open the file! We’ll make use of <code>uproot</code>s use of <a href="https://xrootd.slac.stanford.edu/" class="external-link">XRootD</a> to read in the file
<em>over the network</em>. This will save us from having to download the
file.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>infile_name <span class="op">=</span> <span class="st">'root://eospublic.cern.ch//eos/opendata/cms/derived-data/AOD2NanoAODOutreachTool/ForHiggsTo4Leptons/SMHiggsToZZTo4L.root'</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>infile <span class="op">=</span> uproot.<span class="bu">open</span>(infile_name)</span></code></pre>
</div>
<div id="download-the-file" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="download-the-file" class="callout-inner">
<h3 class="callout-title">Download the file?<a class="anchor" aria-label="anchor" href="#download-the-file"></a>
</h3>
<div class="callout-content">
<p>If too many people are trying to open the same file, it may be easier
to download the file to your laptop. You can execute the following
command in the bash terminal.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>curl http:<span class="op">//</span>opendata.cern.ch<span class="op">/</span>record<span class="op">/</span><span class="dv">12361</span><span class="op">/</span>files<span class="op">/</span>SMHiggsToZZTo4L.root <span class="op">--</span>output SMHiggsToZZTo4L.root</span></code></pre>
</div>
<p>Alternatively, you can follow <a href="https://opendata.cern.ch/record/12361" class="external-link">this link</a> to the data
record on the CERN Open Data Portal. If you scroll down to the bottom of
the page and click the <strong>Download</strong> button.</p>
<p>For the remainder of this tutorial you will want the file to be in
the same directory/folder as your python code, whether you are using a
Jupyter notebook or a simple python script. So make sure you move this
file to that location after you have downloaded it.</p>
<p>To read in the file, you’ll change one line to define the input file
to be</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>infile_name <span class="op">=</span> <span class="st">'SMHiggsToZZTo4L.root'</span></span></code></pre>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="investigate-the-file">Investigate the file<a class="anchor" aria-label="anchor" href="#investigate-the-file"></a>
<a class="anchor" aria-label="anchor" href="#investigate-the-file"></a>
</h2>
<hr class="half-width">
<p>So you’ve opened the file with <code>uproot</code>. What is this
<code>infile</code> object? Let’s add the following code</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(infile))</span></code></pre>
</div>
<p>and we get</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'uproot.reading.ReadOnlyDirectory'&gt;</code></pre>
</div>
<p>We can interface with this object similar to how we would interface
with a <a href="https://www.w3schools.com/python/python_dictionaries.asp" class="external-link">python
dictionary</a>.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>keys <span class="op">=</span> infile.keys()</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="bu">print</span>(keys)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['Events;1']</code></pre>
</div>
<p>But what is this?</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>events <span class="op">=</span> infile[<span class="st">'Events'</span>]</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(events))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'uproot.models.TTree.Model_TTree_v20'&gt;</code></pre>
</div>
<p>Ah, this is the <code>TTree</code> object that we learned a bit about
in the previous episodes! Let’s see what’s in it!</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>branches <span class="op">=</span> infile[<span class="st">'Events'</span>].keys()</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="cf">for</span> branch <span class="kw">in</span> branches:</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>branch<span class="sc">:20s}</span><span class="ss"> </span><span class="sc">{</span>infile[<span class="st">'Events'</span>][branch]<span class="sc">}</span><span class="ss">"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>run                  &lt;TBranch 'run' at 0x7faa76d2cdd8&gt;
luminosityBlock      &lt;TBranch 'luminosityBlock' at 0x7faa76d2cda0&gt;
event                &lt;TBranch 'event' at 0x7faa76d13748&gt;
PV_npvs              &lt;TBranch 'PV_npvs' at 0x7faa76d13e10&gt;
PV_x                 &lt;TBranch 'PV_x' at 0x7faa76d194e0&gt;
PV_y                 &lt;TBranch 'PV_y' at 0x7faa76d19ba8&gt;
PV_z                 &lt;TBranch 'PV_z' at 0x7faa76d212b0&gt;
nMuon                &lt;TBranch 'nMuon' at 0x7faa76d21978&gt;
Muon_pt              &lt;TBranch 'Muon_pt' at 0x7faa76d5c080&gt;
Muon_eta             &lt;TBranch 'Muon_eta' at 0x7faa76d5c6d8&gt;
Muon_phi             &lt;TBranch 'Muon_phi' at 0x7faa76d5ccc0&gt;
Muon_mass            &lt;TBranch 'Muon_mass' at 0x7faa76d582e8&gt;
Muon_charge          &lt;TBranch 'Muon_charge' at 0x7faa76d588d0&gt;
Muon_pfRelIso03_all  &lt;TBranch 'Muon_pfRelIso03_all' at 0x7faa76d58eb8&gt;
Muon_pfRelIso04_all  &lt;TBranch 'Muon_pfRelIso04_all' at 0x7faa76d4e4e0&gt;
Muon_dxy             &lt;TBranch 'Muon_dxy' at 0x7faa76d4eac8&gt;
Muon_dxyErr          &lt;TBranch 'Muon_dxyErr' at 0x7faa7443a0f0&gt;
Muon_dz              &lt;TBranch 'Muon_dz' at 0x7faa7443a6d8&gt;
Muon_dzErr           &lt;TBranch 'Muon_dzErr' at 0x7faa7443ad30&gt;
nElectron            &lt;TBranch 'nElectron' at 0x7faa74442358&gt;
Electron_pt          &lt;TBranch 'Electron_pt' at 0x7faa74442940&gt;
Electron_eta         &lt;TBranch 'Electron_eta' at 0x7faa74442f28&gt;
Electron_phi         &lt;TBranch 'Electron_phi' at 0x7faa7444a550&gt;
Electron_mass        &lt;TBranch 'Electron_mass' at 0x7faa7444ab38&gt;
Electron_charge      &lt;TBranch 'Electron_charge' at 0x7faa74451160&gt;
Electron_pfRelIso03_all &lt;TBranch 'Electron_pfRelIso03_all' at 0x7faa74451748&gt;
Electron_dxy         &lt;TBranch 'Electron_dxy' at 0x7faa74451d30&gt;
Electron_dxyErr      &lt;TBranch 'Electron_dxyErr' at 0x7faa74459358&gt;
Electron_dz          &lt;TBranch 'Electron_dz' at 0x7faa74459940&gt;
Electron_dzErr       &lt;TBranch 'Electron_dzErr' at 0x7faa74459f28&gt;
MET_pt               &lt;TBranch 'MET_pt' at 0x7faa7445f550&gt;
MET_phi              &lt;TBranch 'MET_phi' at 0x7faa7445fbe0&gt;</code></pre>
</div>
<p>There are multiple syntax you can access each of these branches.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>pt <span class="op">=</span> infile[<span class="st">'Events'</span>][<span class="st">'Muon_pt'</span>]</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co"># or </span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>pt <span class="op">=</span> infile[<span class="st">'Events/Muon_pt'</span>]</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>pt <span class="op">=</span> events.Muon_pt</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>pt <span class="op">=</span> events[<span class="st">'Muon_pt'</span>]</span></code></pre>
</div>
<p>We’ll use that last one for this lesson just to save some typing.
:)</p>
<p>In the next episode we’ll use the <code>awkward</code> array object
when we extract these data and see how we can use <code>awkward</code>
in a standard-but-slow way or in a clever-and-fast way!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>You can use uproot to interface with ROOT files which is often
easier than installing the full ROOT ecosystem.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-07-awkward"><p>Content from <a href="07-awkward.html">Using awkward arrays to analyze HEP data</a></p>
<hr>
<p>Last updated on 2024-07-09 |

        <a href="https://github.com/cms-opendata-workshop/workbench-template-md/edit/main/episodes/07-awkward.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 20 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are awkward arrays?</li>
<li>How do I work with awkward arrays?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn to use awkward arrays in a simple, naive way.</li>
<li>Learn to use awkward arrays in a much faster way, making use of the
built-in functionality of the library.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="why-awkward" class="callout testimonial">
<div class="callout-square">
<i class="callout-icon" data-feather="heart"></i>
</div>
<div id="why-awkward" class="callout-inner">
<h3 class="callout-title">Why awkward?<a class="anchor" aria-label="anchor" href="#why-awkward"></a>
</h3>
<div class="callout-content">
<p>A natural question to ask would be “<em>Why do I have to learn about
awkward? Why can’t I just use numpy?</em>” And yes, those are two
questions. :) The quick answers are: you don’t have to and you can! But
let’s dig deeper.</p>
<p>Awkward-array is a newer python tool written by Jim Pivarski
(Princeton) and others that allows for very fast manipulation of
``<em>jagged</em>” arrays, like we find in HEP. You definitely don’t
<em>have</em> to use it, but we present it here because it can speed
things up considerably…if you know how to write your code.</p>
<p>Similarly, you can of course use standard <code>numpy</code> arrays
for many parts of your analysis, but your data may not always fit into
<code>numpy</code> arrays without some careful attention to your code.
In either case, you’ll want to think about how to work with your data
once you get it out of your file.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="environment">Environment<a class="anchor" aria-label="anchor" href="#environment"></a>
<a class="anchor" aria-label="anchor" href="#environment"></a>
</h2>
<hr class="half-width">
<p>Use the Python environment that you set up in the previous two lesson
pages, such as your <code>my_python</code> docker container. We leave it
up to you whether or not you write and execute this code in a script or
as a Jupyter notebook.</p>
</section><section><h2 class="section-heading" id="numpy-arrays-a-review">Numpy arrays: a review<a class="anchor" aria-label="anchor" href="#numpy-arrays-a-review"></a>
<a class="anchor" aria-label="anchor" href="#numpy-arrays-a-review"></a>
</h2>
<hr class="half-width">
<p>Before we dive into <code>awkward</code> lets review some of the
awsome aspects of <code>numpy</code> arrays…and also examine their
limitations.</p>
<p>Let’s import <code>numpy</code> (if you have not already done that in
this python session).</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code></pre>
</div>
<p>Next, let’s make a simple <code>numpy</code> array to use for our
exmples.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>x <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="bu">print</span>(x)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1 2 3 4]</code></pre>
</div>
<p>Numpy arrays are great because we can perform mathematical operations
on them and the operation is quickly and efficiently carried out on
every member of the array.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>y <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>x</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="bu">print</span>(y)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="bu">print</span>() <span class="co"># This just puts a blank line between our other print statements</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>z <span class="op">=</span> x<span class="op">**</span><span class="dv">2</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="bu">print</span>(z)</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>a <span class="op">=</span> np.sqrt(x)</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="bu">print</span>(a)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[2 4 6 8]

[ 1  4  9 16]

[1.         1.41421356 1.73205081 2.        ]</code></pre>
</div>
<p>Note that in that last operation where we take the square root, we
made use of a <code>numpy</code> function <code>sqrt</code>. That
function
`<code>knows" how to operate on the elements of a numpy array, as opposed to the standard python</code>math<code>library which does *not* know how to work with</code>numpy`
arrays.</p>
<p>So this seems great! However, <code>numpy</code> arrays break down
when you have arrays that are not 1D and cannot be expressed in a
regular
`<code>n x m" format.  For example, suppose you have two events and each event has two muons and you  want to store the transverse momentum ($p_T$) for these muons in a</code>numpy`
array.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>pt <span class="op">=</span> np.array([[<span class="fl">20.9</span>, <span class="fl">12.3</span>], [<span class="fl">127.1</span>, <span class="fl">60.2</span>]])</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>pt</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="bu">print</span>(pt)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="bu">print</span>(x)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[[ 20.9  12.3]
 [127.1  60.2]]

 [[ 41.8  24.6]
  [254.2 120.4]]</code></pre>
</div>
<p>Great! Everything looks good and we get our expected behavior!</p>
<p>Now, suppose there are <em>3</em> muons in the second event. Does
this still work?</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>pt <span class="op">=</span> np.array([[<span class="fl">20.9</span>, <span class="fl">12.3</span>], [<span class="fl">127.1</span>, <span class="fl">60.2</span>, <span class="fl">23.8</span>]])</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>pt</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="bu">print</span>(x)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[list([20.9, 12.3, 20.9, 12.3])
     list([127.1, 60.2, 23.8, 127.1, 60.2, 23.8])]</code></pre>
</div>
<p>Wait…what??? It looks like it just duplicated the entries so now it
looks like we’re storing information for <em>4</em> muons in the first
event and <em>6</em> muons in the second event! A closer looks shows us
that while <code>pt</code> is a <code>numpy</code> array, the elements
are not arrays but python <code>list</code> objects, which behave
differently.</p>
<p>The reason this happened is that <code>numpy</code> arrays can’t deal
with this type of
`<code>jagged" behavior where the first row of your data might have 2 elements and the second row might have 3 elements and the third row might have 0 elements and so on. For that, we need</code>awkward-array`.</p>
</section><section><h2 class="section-heading" id="access-or-download-a-root-file-for-use-with-this-exercise">Access or download a ROOT file for use with this exercise<a class="anchor" aria-label="anchor" href="#access-or-download-a-root-file-for-use-with-this-exercise"></a>
<a class="anchor" aria-label="anchor" href="#access-or-download-a-root-file-for-use-with-this-exercise"></a>
</h2>
<hr class="half-width">
<p>We’ll work with the same file as in the previous lesson. If you have
jumped straight to this lesson, please go back and review how to access
the file over the network or by downloading it.</p>
</section><section><h2 class="section-heading" id="open-the-file">Open the file<a class="anchor" aria-label="anchor" href="#open-the-file"></a>
<a class="anchor" aria-label="anchor" href="#open-the-file"></a>
</h2>
<hr class="half-width">
<div id="stop" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="stop" class="callout-inner">
<h3 class="callout-title">
<em>Stop!</em><a class="anchor" aria-label="anchor" href="#stop"></a>
</h3>
<div class="callout-content">
<p>If you haven’t already, make sure you have run through the <a href="https://cms-opendata-workshop.github.io/workshop2024-lesson-cpp-root-python/06-uproot/index.html" class="external-link">previous
lesson</a> on working with uproot.</p>
</div>
</div>
</div>
<p>Let’s open this ROOT file! If you’re writing a python script, let’s
call it <code>open_root_file_and_analyze_data.py</code> and if you’re
using a Jupyter notebook, let’s call it
<code>open_root_file_and_analyze_data.ipynb</code>.</p>
<p>First we will import the <code>uproot</code> library, as well as some
other standard libraries. These can be the first lines of your python
script or the first cell of your Jupyter notebook.</p>
<p><em>If this is a script, you may want to run
<code>python open_root_file_and_analyze_data.py</code> every few lines
or so to see the output. If this is a Jupyter notebook, you will want to
put each snippet of code in its own cell and execute them as you go to
see the output.</em></p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pylab <span class="im">as</span> plt</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="im">import</span> uproot</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="im">import</span> awkward <span class="im">as</span> ak</span></code></pre>
</div>
<p>Let’s open the file and pull out some data.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Depending on if you downloaded the file or not, you'll use either</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>infile_name <span class="op">=</span> <span class="st">'root://eospublic.cern.ch//eos/opendata/cms/derived-data/AOD2NanoAODOutreachTool/ForHiggsTo4Leptons/SMHiggsToZZTo4L.root'</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="co"># or </span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co">#infile_name = 'SMHiggsToZZTo4L.root'</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co"># Uncomment the above line if you downloaded the file.</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>infile <span class="op">=</span> uproot.<span class="bu">open</span>(infile_name)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>events <span class="op">=</span> infile[<span class="st">'Events'</span>]</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>pt <span class="op">=</span> events[<span class="st">'Muon_pt'</span>]</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>eta <span class="op">=</span> events[<span class="st">'Muon_eta'</span>]</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>phi <span class="op">=</span> events[<span class="st">'Muon_phi'</span>]</span></code></pre>
</div>
<p>Let’s inspect these objects a little closer. To access the actual
values, we’ll see we need to use the <code>.array()</code> member
function.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="bu">print</span>(pt)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="bu">print</span>(pt.array())</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(pt.array()))</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>    <span class="bu">print</span>(pt.array()[i])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;TBranch 'Muon_pt' at 0x7f01513a5c88&gt;

[[63, 38.1, 4.05], [], [], [54.3, 23.5, ... 43.1], [4.32, 4.36, 5.63, 4.75], [], []]

299973

[63, 38.1, 4.05]
[]
[]
[54.3, 23.5, 52.9, 4.33, 5.35, 8.39, 3.49]
[]</code></pre>
</div>
<p>Taking a closer look at the entries, we see different numbers of
values in each ``row”, where the rows correspond to events recorded in
the CMS detector.</p>
<p>So can we use manipulate this object like a numpy array? Yes! If
we’re careful about accessing the array properly.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>pt.array()</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="bu">print</span>(x[<span class="dv">0</span>:<span class="dv">5</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[[126, 76.2, 8.1], [], [], [109, 47, 106, 8.66, 10.7, 16.8, 6.98], []]</code></pre>
</div>
<p>When we histogram, however, we need to make use of the
<code>awkward.flatten</code> function. This turns our
<code>awkward</code> array into a 1-dimensional array, so that we lose
all record of what muon belonged to which event.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="bu">print</span>(ak.flatten(pt.array()))</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>plt.figure()</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>plt.hist(ak.flatten(pt.array()),bins<span class="op">=</span><span class="dv">100</span>,<span class="bu">range</span><span class="op">=</span>(<span class="dv">0</span>,<span class="dv">100</span>))<span class="op">;</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>plt.xlabel(<span class="vs">r'Muon $p_T$ (GeV/c)'</span>,fontsize<span class="op">=</span><span class="dv">14</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[63, 38.1, 4.05, 54.3, 23.5, 52.9, 4.33, ... 32.6, 43.1, 4.32, 4.36, 5.63, 4.75]</code></pre>
</div>
<figure><img src="../fig/awkward_muon_pt.png" class="figure mx-auto d-block"></figure><p>We can also manipulate the data quite quickly. Let’s see how!</p>
<p>This sample file is Monte Carlo data that simulates the decay of
Higgs bosons to 4 charged leptons. Let’s look for decays to 4 muons,
where there are two positively charged muons and 2 negatively charged
muons.</p>
<p>Since the data stores momentum information as <span class="math inline">\(p_T, \eta, \phi\)</span>, first we’ll calculate
the Cartesian <span class="math inline">\(x,y,z\)</span> components of
momentum, and then we’ll <em>loop</em> over our events to calculate an
invariant mass. We’ll find that looping over the entries is slow, but
there is a faster way!</p>
<p>First the slow but explicit way:</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Python code (event loop)
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># Some helper functions</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="kw">def</span> energy(m, px, py, pz):    </span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>    E <span class="op">=</span> np.sqrt( (m<span class="op">**</span><span class="dv">2</span>) <span class="op">+</span> (px<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> py<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> pz<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>    <span class="cf">return</span> E</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>   </span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="kw">def</span> invmass(E, px, py, pz):</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>    m2 <span class="op">=</span> (E<span class="op">**</span><span class="dv">2</span>) <span class="op">-</span> (px<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> py<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> pz<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>   </span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a>    <span class="cf">if</span> m2 <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a>        m <span class="op">=</span> <span class="op">-</span>np.sqrt(<span class="op">-</span>m2)</span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a>        m <span class="op">=</span> np.sqrt(m2)</span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a>    <span class="cf">return</span> m</span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="kw">def</span> convert(pt, eta, phi):</span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a>    px <span class="op">=</span> pt <span class="op">*</span> np.cos(phi)</span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a>    py <span class="op">=</span> pt <span class="op">*</span> np.sin(phi)</span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a>    pz <span class="op">=</span> pt <span class="op">*</span> np.sinh(eta)</span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a>    </span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a>    <span class="cf">return</span> px, py, pz</span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a></span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a><span class="co"># Convert momentum to x,y,z components</span></span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a></span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a>muon_number <span class="op">=</span> events[<span class="st">'nMuon'</span>].array()</span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a></span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a>pt <span class="op">=</span> events[<span class="st">'Muon_pt'</span>].array()</span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a>eta <span class="op">=</span> events[<span class="st">'Muon_eta'</span>].array()</span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a>phi <span class="op">=</span> events[<span class="st">'Muon_phi'</span>].array()</span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a>muon_q <span class="op">=</span> events[<span class="st">'Muon_charge'</span>].array()</span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a>mass <span class="op">=</span> events[<span class="st">'Muon_mass'</span>].array()</span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a></span>
<span id="cb18-33"><a href="#cb18-33" tabindex="-1"></a>muon_px,muon_py,muon_pz <span class="op">=</span> convert(pt, eta, phi)</span>
<span id="cb18-34"><a href="#cb18-34" tabindex="-1"></a>muon_e <span class="op">=</span> energy(mass, muon_px, muon_py, muon_pz)</span>
<span id="cb18-35"><a href="#cb18-35" tabindex="-1"></a></span>
<span id="cb18-36"><a href="#cb18-36" tabindex="-1"></a><span class="co"># Do the calculation</span></span>
<span id="cb18-37"><a href="#cb18-37" tabindex="-1"></a></span>
<span id="cb18-38"><a href="#cb18-38" tabindex="-1"></a>masses <span class="op">=</span> []</span>
<span id="cb18-39"><a href="#cb18-39" tabindex="-1"></a></span>
<span id="cb18-40"><a href="#cb18-40" tabindex="-1"></a>nevents <span class="op">=</span> <span class="bu">len</span>(pt)</span>
<span id="cb18-41"><a href="#cb18-41" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Nevents: </span><span class="sc">{</span>nevents<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb18-42"><a href="#cb18-42" tabindex="-1"></a></span>
<span id="cb18-43"><a href="#cb18-43" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb18-44"><a href="#cb18-44" tabindex="-1"></a></span>
<span id="cb18-45"><a href="#cb18-45" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(nevents):</span>
<span id="cb18-46"><a href="#cb18-46" tabindex="-1"></a></span>
<span id="cb18-47"><a href="#cb18-47" tabindex="-1"></a>    <span class="cf">if</span> n<span class="op">%</span><span class="dv">10000</span><span class="op">==</span><span class="dv">0</span>:</span>
<span id="cb18-48"><a href="#cb18-48" tabindex="-1"></a>        <span class="bu">print</span>(n)</span>
<span id="cb18-49"><a href="#cb18-49" tabindex="-1"></a></span>
<span id="cb18-50"><a href="#cb18-50" tabindex="-1"></a>    nmuons <span class="op">=</span> muon_number[n]</span>
<span id="cb18-51"><a href="#cb18-51" tabindex="-1"></a>    </span>
<span id="cb18-52"><a href="#cb18-52" tabindex="-1"></a>    e <span class="op">=</span> muon_e[n]</span>
<span id="cb18-53"><a href="#cb18-53" tabindex="-1"></a>    q <span class="op">=</span> muon_q[n]</span>
<span id="cb18-54"><a href="#cb18-54" tabindex="-1"></a>    px <span class="op">=</span> muon_px[n] </span>
<span id="cb18-55"><a href="#cb18-55" tabindex="-1"></a>    py <span class="op">=</span> muon_py[n]</span>
<span id="cb18-56"><a href="#cb18-56" tabindex="-1"></a>    pz <span class="op">=</span> muon_pz[n]</span>
<span id="cb18-57"><a href="#cb18-57" tabindex="-1"></a>    </span>
<span id="cb18-58"><a href="#cb18-58" tabindex="-1"></a></span>
<span id="cb18-59"><a href="#cb18-59" tabindex="-1"></a>    <span class="cf">if</span> nmuons <span class="op">&lt;</span> <span class="dv">4</span>:</span>
<span id="cb18-60"><a href="#cb18-60" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb18-61"><a href="#cb18-61" tabindex="-1"></a>    </span>
<span id="cb18-62"><a href="#cb18-62" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, nmuons<span class="op">-</span><span class="dv">3</span>):</span>
<span id="cb18-63"><a href="#cb18-63" tabindex="-1"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(i<span class="op">+</span><span class="dv">1</span>, nmuons<span class="op">-</span><span class="dv">2</span>):</span>
<span id="cb18-64"><a href="#cb18-64" tabindex="-1"></a>            <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(j<span class="op">+</span><span class="dv">1</span>, nmuons<span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb18-65"><a href="#cb18-65" tabindex="-1"></a>                <span class="cf">for</span> l <span class="kw">in</span> <span class="bu">range</span>(k<span class="op">+</span><span class="dv">1</span>, nmuons):</span>
<span id="cb18-66"><a href="#cb18-66" tabindex="-1"></a></span>
<span id="cb18-67"><a href="#cb18-67" tabindex="-1"></a>                    <span class="cf">if</span> q[i] <span class="op">+</span> q[j] <span class="op">+</span> q[k] <span class="op">+</span> q[l] <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb18-68"><a href="#cb18-68" tabindex="-1"></a>                        etot <span class="op">=</span> e[i] <span class="op">+</span> e[j] <span class="op">+</span> e[k] <span class="op">+</span> e[l]</span>
<span id="cb18-69"><a href="#cb18-69" tabindex="-1"></a>                        pxtot <span class="op">=</span> px[i] <span class="op">+</span> px[j] <span class="op">+</span> px[k] <span class="op">+</span> px[l]</span>
<span id="cb18-70"><a href="#cb18-70" tabindex="-1"></a>                        pytot <span class="op">=</span> py[i] <span class="op">+</span> py[j] <span class="op">+</span> py[k] <span class="op">+</span> py[l]</span>
<span id="cb18-71"><a href="#cb18-71" tabindex="-1"></a>                        pztot <span class="op">=</span> pz[i] <span class="op">+</span> pz[j] <span class="op">+</span> pz[k] <span class="op">+</span> pz[l]</span>
<span id="cb18-72"><a href="#cb18-72" tabindex="-1"></a></span>
<span id="cb18-73"><a href="#cb18-73" tabindex="-1"></a>                        m <span class="op">=</span> invmass(etot, pxtot, pytot, pztot)</span>
<span id="cb18-74"><a href="#cb18-74" tabindex="-1"></a>                        masses.append(m)</span>
<span id="cb18-75"><a href="#cb18-75" tabindex="-1"></a>                        </span>
<span id="cb18-76"><a href="#cb18-76" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Time to run: </span><span class="sc">{</span>(time.time() <span class="op">-</span> start)<span class="sc">}</span><span class="ss"> seconds"</span>) </span>
<span id="cb18-77"><a href="#cb18-77" tabindex="-1"></a></span>
<span id="cb18-78"><a href="#cb18-78" tabindex="-1"></a><span class="co"># Plot the results</span></span>
<span id="cb18-79"><a href="#cb18-79" tabindex="-1"></a></span>
<span id="cb18-80"><a href="#cb18-80" tabindex="-1"></a>plt.figure()</span>
<span id="cb18-81"><a href="#cb18-81" tabindex="-1"></a>plt.hist(masses,bins<span class="op">=</span><span class="dv">140</span>,<span class="bu">range</span><span class="op">=</span>(<span class="dv">80</span>,<span class="dv">150</span>))</span>
<span id="cb18-82"><a href="#cb18-82" tabindex="-1"></a>plt.xlabel(<span class="vs">r'4-muon invariant mass (GeV/c$^2$'</span>,fontsize<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb18-83"><a href="#cb18-83" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<figure><img src="../fig/awkward_Higgs_4l_loop.png" class="figure mx-auto d-block"></figure><p>When I run this on my laptop, it takes a little over 3 minutes to
run. Is there a better way?</p>
<p>Yes!</p>
<p>We’ve adapted some code from <a href="https://hsf-training.github.io/hsf-training-scikit-hep-webpage/04-awkward/index.html" class="external-link">this
tutorial</a>, put together by the HEP Software Foundation to show you
how much faster using the built-in awkward functions can be:</p>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Python code (awkward array)
  </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>muons <span class="op">=</span> ak.<span class="bu">zip</span>({</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>    <span class="st">"px"</span>: muon_px,</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>    <span class="st">"py"</span>: muon_py,</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="st">"pz"</span>: muon_pz,</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>    <span class="st">"e"</span>: muon_e,</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>    <span class="st">"q"</span>: muon_q,</span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>})</span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a>quads <span class="op">=</span> ak.combinations(muons, <span class="dv">4</span>)</span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a>mu1, mu2, mu3, mu4 <span class="op">=</span> ak.unzip(quads)</span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a>mass_fast <span class="op">=</span> (mu1.e <span class="op">+</span> mu2.e <span class="op">+</span> mu3.e <span class="op">+</span> mu4.e)<span class="op">**</span><span class="dv">2</span> <span class="op">-</span> ((mu1.px <span class="op">+</span> mu2.px <span class="op">+</span> mu3.px <span class="op">+</span> mu4.px)<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> (mu1.py <span class="op">+</span> mu2.py <span class="op">+</span> mu3.py <span class="op">+</span> mu4.py)<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> (mu1.pz <span class="op">+</span> mu2.pz <span class="op">+</span> mu3.pz <span class="op">+</span> mu4.pz)<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a>mass_fast <span class="op">=</span> np.sqrt(mass_fast)</span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a></span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a>qtot <span class="op">=</span> mu1.q <span class="op">+</span> mu2.q <span class="op">+</span> mu3.q <span class="op">+</span> mu4.q</span>
<span id="cb19-20"><a href="#cb19-20" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Time to run: </span><span class="sc">{</span>(time.time() <span class="op">-</span> start)<span class="sc">}</span><span class="ss"> seconds"</span>) </span>
<span id="cb19-22"><a href="#cb19-22" tabindex="-1"></a></span>
<span id="cb19-23"><a href="#cb19-23" tabindex="-1"></a>plt.hist(ak.flatten(mass_fast[qtot<span class="op">==</span><span class="dv">0</span>]), bins<span class="op">=</span><span class="dv">140</span>,<span class="bu">range</span><span class="op">=</span>(<span class="dv">80</span>,<span class="dv">150</span>))<span class="op">;</span></span>
<span id="cb19-24"><a href="#cb19-24" tabindex="-1"></a>plt.xlabel(<span class="vs">r'4-muon invariant mass (GeV/c$^2$'</span>,fontsize<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb19-25"><a href="#cb19-25" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<figure><img src="../fig/awkward_Higgs_4l_ak_zip.png" class="figure mx-auto d-block"></figure><p>On my laptop, this takes less than 0.2 seconds! Note that we are
making use of <a href="https://jakevdp.github.io/PythonDataScienceHandbook/02.06-boolean-arrays-and-masks.html" class="external-link">boolean
arrays to perform masking</a> when we type
<code>mass_fast[qtot==0]</code>.</p>
<p>While we cannot teach you <em>everything</em> about
<code>awkward</code>, we hope we’ve given you a basic introduction to
what it can do and where you can find more information so that you can
quickly process the output of any of your open data jobs and get started
on your own analysis!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Awkward arrays can help speed up your code, but it requires a
different way of thinking and more awareness of what functions are coded
up in the awkward library.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/cms-opendata-workshop/workbench-template-md/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/cms-opendata-workshop/workbench-template-md/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/cms-opendata-workshop/workbench-template-md/" class="external-link">Source</a></p>
				<p><a href="https://github.com/cms-opendata-workshop/workbench-template-md/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:cms-dpoa-coordinator@cern.ch">Contact</a> | <a href="https://opendata.cern.ch/docs/about-cms" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.5" class="external-link">sandpaper (0.16.5)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/cms-opendata-workshop/varnish/tree/405b7a74ee1b2fc89c3e49e116ce96d4d65182b3" class="external-link">varnish (1.0.3)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://cms-opendata-workshop.github.io/workbench-template-md/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, CMS",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://cms-opendata-workshop.github.io/workbench-template-md/instructor/aio.html",
  "identifier": "https://cms-opendata-workshop.github.io/workbench-template-md/instructor/aio.html",
  "dateCreated": "2024-07-29",
  "dateModified": "2024-07-23",
  "datePublished": "2024-07-23"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

