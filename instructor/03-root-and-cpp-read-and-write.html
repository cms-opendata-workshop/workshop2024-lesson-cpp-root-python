<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>ROOT for data analysis: Using ROOT with C++ to write and read a file</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="manifest" href="../site.webmanifest"><link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="dpoa-logo" alt="CMS DPOA logo" src="../assets/images/dpoa-logo.png"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#polishing-beta-stage" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>
        
      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>
      
      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../03-root-and-cpp-read-and-write.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="CMS DPOA small logo" src="../assets/images/dpoa-logo-sm.png"></div>
    <div class="lesson-title-md">
      ROOT for data analysis
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            ROOT for data analysis
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr></ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  ROOT for data analysis
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 15%" class="percentage">
    15%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 15%" aria-valuenow="15" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../03-root-and-cpp-read-and-write.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Introduction</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-cpp-hello-world.html">2. Lightning overview of C++</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        3. Using ROOT with C++ to write and read a file
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#why-root">Why ROOT?</a></li>
<li><a href="#interfacing-with-root">Interfacing with ROOT</a></li>
<li><a href="#what-wont-you-learn-here">What won’t you learn here</a></li>
<li><a href="#ok-where-can-i-learn-that-stuff">OK, where <em>can</em> I learn that stuff?</a></li>
<li><a href="#root-terminology">ROOT terminology</a></li>
<li><a href="#write-to-a-file">Write to a file</a></li>
<li><a href="#read-a-root-file">Read a ROOT file</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-root-and-cpp-fill-a-histogram.html">4. Using ROOT with C++ to fill a histogram</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-going-further-with-pyroot.html">5. Using ROOT with python</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-uproot.html">6. Using uproot to open ROOT files</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-awkward.html">7. Using awkward arrays to analyze HEP data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr></ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="../instructor/aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html dummypushtext -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/02-cpp-hello-world.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/04-root-and-cpp-fill-a-histogram.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/02-cpp-hello-world.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Lightning overview
        </a>
        <a class="chapter-link float-end" href="../instructor/04-root-and-cpp-fill-a-histogram.html" rel="next">
          Next: Using ROOT with C++... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Using ROOT with C++ to write and read a file</h1>
        <p>Last updated on 2024-07-02 |
        
        <a href="https://github.com/cms-opendata-workshop/workbench-template-md/edit/main/episodes/03-root-and-cpp-read-and-write.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 35 minutes</p>
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>Why do I need to use ROOT?</li>
<li>How do I use ROOT with C++?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Write a ROOT file using compiled C++ code.</li>
<li>Read a ROOT file using compiled C++ code.</li>
</ul></div>
</div>
</div>
</div>
</div>
<section id="why-root"><h2 class="section-heading">Why ROOT?<a class="anchor" aria-label="anchor" href="#why-root"></a>
</h2>
<hr class="half-width"><p>HEP data can be challenging! Not just to analyze but to store! The
data don’t lend themselves to neat rows in a spreadsheet. One event
might have 3 muons and the next event might have none. One event might
have 2 jets and the next event might have 20. What to do???</p>
<p>The ROOT toolkit provides a file format that can allow for efficient
storage of this type of data with heterogenous entries in each event. It
<em>also</em> provides a pretty complete analysis environment with
specialized libraries and visualization packages. Until recently, you
had to install the entire ROOT package just to read a file. The software
provided by CMS to read the open data relies on some minimal knowledge
of ROOT to access. From there, you can write out more ROOT files for
further analysis or dump the data (or some subset of the data) to a
format of your choosing.</p>
</section><section id="interfacing-with-root"><h2 class="section-heading">Interfacing with ROOT<a class="anchor" aria-label="anchor" href="#interfacing-with-root"></a>
</h2>
<hr class="half-width"><p>ROOT is a toolkit. That is, it is a set of functions and libraries
that can be utilized in a variety of languages and workflows. It was
originally written in C++ and lends itself nicely to being used in
standard, compiled C++ code.</p>
<p>However, analysts wanted something more interactive, and so the ROOT
team developed <a href="https://root.cern.ch/root/html534/guides/users-guide/CINT.html" class="external-link">CINT,
a C++ interpreter</a>. This gave users an iteractive environment where
they could type of C++ code one line at a time and have it executed
immediately. This gave rise to C++ scripts that many analysts use and in
fact the sample <a href="https://root.cern/doc/master/group__Tutorials.html" class="external-link">ROOT
tutorals</a> are almost exclusively written as these C++ scripts (with a
<code>.C</code> file extension). Because they are written to run in
CINT, they usually do not need the standard C++ <code>include</code>
statements that you will see in the examples below.</p>
<p>With the rise of the popularity of python, a set of Python-C++
bindings were written and eventually officially supported by the ROOT
development team, called <a href="https://root.cern/manual/python/" class="external-link">PyROOT</a>. Many analysts
currently write the code which plots or fits their code using PyROOT,
and we will show you some examples later in this exercise.</p>
</section><section id="what-wont-you-learn-here"><h2 class="section-heading">What won’t you learn here<a class="anchor" aria-label="anchor" href="#what-wont-you-learn-here"></a>
</h2>
<hr class="half-width"><p>ROOT is an incredibly powerful toolkit and has <em>a lot</em> in it.
It is heavily used by most nuclear and particle physics experiments
running today. As such, a full overview is beyond the scope of this
minimal tutorial!</p>
<p>This tutorial will <em>not</em> teach you how to * Make any plots
more sophisticated than a basic histogram. * Fit your data * Use any of
the HEP-specific libraries (e.g. <code>TLorentzVector</code>)</p>
</section><section id="ok-where-can-i-learn-that-stuff"><h2 class="section-heading">OK, where <em>can</em> I learn that stuff?<a class="anchor" aria-label="anchor" href="#ok-where-can-i-learn-that-stuff"></a>
</h2>
<hr class="half-width"><p>There are some great resources and tutorials out there for going
further.</p>
<ul><li>
<a href="https://root.cern/primer/" class="external-link">The official ROOT Primer</a>.
The recommended starting point to learn what ROOT can do.</li>
<li>
<a href="https://root.cern/doc/master/group__Tutorials.html" class="external-link">The
official ROOT tutorials</a> This is a fairly comprehensive listing of
well-commented examples, written in C++ <em>scripts</em> that are
designed to be run from within the ROOT C-interpreter.</li>
<li>
<a href="https://github.com/root-project/training/tree/master/SummerStudentCourse/2022" class="external-link">ROOT
tutorial (2022).</a>. Tutorial from offical ROOT project for summer
students.</li>
<li>
<a href="https://cms-opendata-workshop.github.io/workshop-lesson-root/" class="external-link">Efficient
analysis with ROOT</a>. This is a more complete, end-to-end tutorial on
using ROOT in a CMS analysis workflow. It was created in 2020 by some of
our CMS colleagues for a separate workshop, but much of the material is
relevant for the Open Data effort. It takes about 2.5 hours to complete
the tutorial.</li>
<li>
<a href="https://www.nevis.columbia.edu/~seligman/root-class/" class="external-link">ROOT
tutorial from Nevis Lab (Columbia Univ.)</a>. Very complete and always
up-to-date tutorial from our friends at Columbia.</li>
</ul><div id="be-in-docker" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="be-in-docker" class="callout-inner">
<h3 class="callout-title">Be in Docker!<a class="anchor" aria-label="anchor" href="#be-in-docker"></a>
</h3>
<div class="callout-content">
<p>For this episode, you’ll still be running your code from the
<code>my_root</code> docker container that you launched in the previous
episode.</p>
<p>As you edit the files though, you may want to do the editing from
your <em>local</em> environment, so that you have access to your
preferred editors.</p>
</div>
</div>
</div>
</section><section id="root-terminology"><h2 class="section-heading">ROOT terminology<a class="anchor" aria-label="anchor" href="#root-terminology"></a>
</h2>
<hr class="half-width"><p>To store these datasets, ROOT uses an object called
<code>TTree</code> (ROOT objects are often prefixed by a
<code>T</code>).</p>
<p>Each variable on the <code>TTree</code>, for example the transverse
momentum of a muon, is stored in its own <code>TBranch</code>.</p>
<div id="source-code-for-c-lessons" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="source-code-for-c-lessons" class="callout-inner">
<h3 class="callout-title">Source code for C++ lessons<a class="anchor" aria-label="anchor" href="#source-code-for-c-lessons"></a>
</h3>
<div class="callout-content">
<p>There’s a fair amount of C++ in this lesson and you’ll get the most
out of it if you work through it all and type it all out.</p>
<p>However, it’s easy to make a mistake, particularly with the
<code>Makefile</code>. We’ve made the the source code available in this
<a href="https://github.com/cms-opendata-workshop/workshop2022-lesson-cpp-root-python/blob/gh-pages/data/root_and_cpp_tutorial_source_code.tgz" class="external-link">tarball</a>.
Just follow the link and click on the <strong>Download</strong> button
or download it directly with <code>wget</code> to you working directory
<code>cms_open_data_root</code> in your local bash terminal with:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">wget</span> https://raw.githubusercontent.com/cms-opendata-workshop/workshop2022-lesson-cpp-root-python/gh-pages/data/root_and_cpp_tutorial_source_code.tgz</span></code></pre>
</div>
<p>Untar the file with:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-zxvf</span> root_and_cpp_tutorial_source_code.tgz</span></code></pre>
</div>
<p>It will create a directory called
<code>root_and_cpp_tutorial_source_code</code> with the files in it.</p>
</div>
</div>
</div>
</section><section id="write-to-a-file"><h2 class="section-heading">Write to a file<a class="anchor" aria-label="anchor" href="#write-to-a-file"></a>
</h2>
<hr class="half-width"><p>Let’s create a file with name <code>write_ROOT_file.cc</code> using
our preferred editor. We’ll call this file
<code>write_ROOT_file.cc</code> and it will be saved in the
<code>cms_open_data_root</code> directory.</p>
<p>As in our last example, we first <code>include</code> some header
files, both the standard C++ ones and some new ROOT-specific ones.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdio&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdlib&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TROOT.h"</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TTree.h"</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TFile.h"</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TRandom.h"</span></span></code></pre>
</div>
<p>Note the inclusion of <code>TRandom.h</code>, which we’ll be using to
generate some random data for our test file.</p>
<p>Next, we’ll create our <code>main</code> function and start it off by
defining our ROOT file object. We’ll also include some explanatory
comments, which in the C++ syntax are preceded by two slashes,
<code>//</code>.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>    <span class="co">// Create a ROOT file, f.</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    <span class="co">// The first argument, "tree.root" is the name of the file.</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="co">// The second argument, "recreate", will recreate the file, even if it already exists.</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    TFile f<span class="op">(</span><span class="st">"tree.root"</span><span class="op">,</span><span class="st">"recreate"</span><span class="op">);</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
<p>Now we define the <code>TTree</code> object which will hold all of
our variables and the data they represent.</p>
<p>This line comes after the <code>TFile</code> creation, but before the
<code>return 0</code> statement at the end of the main function.
Subsequent edits will also follow the previous edit but come before
<code>return 0</code> statement.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>    <span class="co">// A TTree object called t1.</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="co">// The first argument is the name of the object as stored by ROOT.</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="co">// The second argument is a short descriptor.</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    TTree t1<span class="op">(</span><span class="st">"t1"</span><span class="op">,</span><span class="st">"A simple Tree with simple variables"</span><span class="op">);</span></span></code></pre>
</div>
<p>For this example, we’ll assume we’re recording the missing transverse
energy, which means there is only one value recorded for each event.</p>
<p>We’ll also record the energy and momentum (transverse momentum, eta,
phi) for jets, where there could be between 0 and 5 jets in each
event.</p>
<p>This means we will define some C++ variables that will be used in the
program. We do this <em>before</em> we define the <code>TBranch</code>es
in the <code>TTree</code>.</p>
<p>When we define the variables, we use ROOT’s <code>Float_t</code> and
<code>Int_t</code> types, which are analogous to <code>float</code> and
<code>int</code> but are less dependent on the underlying computer OS
and architecture.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>   <span class="dt">Float_t</span> met<span class="op">;</span> <span class="co">// Missing energy in the transverse direction.</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>   <span class="dt">Int_t</span> njets<span class="op">;</span> <span class="co">// Necessary to keep track of the number of jets</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>   <span class="co">// We'll define these assuming we will not write information for</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>   <span class="co">// more than 16 jets. We'll have to check for this in the code otherwise</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>   <span class="co">// it could crash!</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>   <span class="dt">Float_t</span> pt<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>   <span class="dt">Float_t</span> eta<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>   <span class="dt">Float_t</span> phi<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span></code></pre>
</div>
<p>We now define the <code>TBranch</code> for the <code>met</code>
variable.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>    <span class="co">// The first argument is ROOT's internal name of the variable.</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    <span class="co">// The second argument is the *address* of the actual variable we defined above</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>    <span class="co">// The third argument defines the *type* of the variable to be stored, and the "F"</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    <span class="co">// at the end signifies that this is a float</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>    t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"met"</span><span class="op">,&amp;</span>met<span class="op">,</span><span class="st">"met/F"</span><span class="op">);</span></span></code></pre>
</div>
<p>Next we define the <code>TBranch</code>es for each of the other
variables, but the syntax is slightly different as these are acting as
arrays with a varying number of entries for each event.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>    <span class="co">// First we define njets where the syntax is the same as before,</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>    <span class="co">// except we take care to identify this as an integer with the final</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>    <span class="co">// /I designation</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"njets"</span><span class="op">,&amp;</span>njets<span class="op">,</span><span class="st">"njets/I"</span><span class="op">);</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    <span class="co">// We can now define the other variables, but we use a slightly different</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    <span class="co">// syntax for the third argument to identify the variable that will be used</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>    <span class="co">// to count the number of entries per event</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>    t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"pt"</span><span class="op">,&amp;</span>pt<span class="op">,</span><span class="st">"pt[njets]/F"</span><span class="op">);</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>    t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"eta"</span><span class="op">,&amp;</span>eta<span class="op">,</span><span class="st">"eta[njets]/F"</span><span class="op">);</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>    t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"phi"</span><span class="op">,&amp;</span>phi<span class="op">,</span><span class="st">"phi[njets]/F"</span><span class="op">);</span></span></code></pre>
</div>
<p>OK, we’ve defined where everything will be stored! Let’s now generate
1000 mock events.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>    <span class="dt">Int_t</span> nevents <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>nevents<span class="op">;</span>i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>        <span class="co">// Generate random number between 10-60 (arbitrary)</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>        met <span class="op">=</span> <span class="dv">50</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">()</span> <span class="op">+</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>        <span class="co">// Generate random number between 0-5, inclusive</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>        njets <span class="op">=</span> gRandom<span class="op">-&gt;</span>Integer<span class="op">(</span><span class="dv">6</span><span class="op">);</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> j<span class="op">=</span><span class="dv">0</span><span class="op">;</span>j<span class="op">&lt;</span>njets<span class="op">;</span>j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>            pt<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="dv">100</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">();</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>            eta<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="dv">6</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">();</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>            phi<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="fl">6.28</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">()</span> <span class="op">-</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>        <span class="co">// After each event we need to *fill* the TTree</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>        t1<span class="op">.</span>Fill<span class="op">();</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>    <span class="co">// After we've run over all the events, we "change directory" (cd) to the file object</span></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a>    <span class="co">// and write the tree to it.</span></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a>    <span class="co">// We can also print the tree, just as a visual identifier to ourselves that</span></span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a>    <span class="co">// the program ran to completion.</span></span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a>    f<span class="op">.</span>cd<span class="op">();</span></span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a>    t1<span class="op">.</span>Write<span class="op">();</span></span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a>    t1<span class="op">.</span>Print<span class="op">();</span></span></code></pre>
</div>
<p>The full <code>write_ROOT_file.cc</code> should now look like
this:</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Full source code file for write_ROOT_file.cc
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdio&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdlib&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TROOT.h"</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TTree.h"</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TFile.h"</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TRandom.h"</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>   <span class="co">// Create a ROOT file, f.</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>   <span class="co">// The first argument, "tree.root" is the name of the file.</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>   <span class="co">// The second argument, "recreate", will recreate the file, even if it already exists.</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a>   TFile f<span class="op">(</span><span class="st">"tree.root"</span><span class="op">,</span> <span class="st">"recreate"</span><span class="op">);</span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>   <span class="co">// A TTree object called t1.</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a>   <span class="co">// The first argument is the name of the object as stored by ROOT.</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a>   <span class="co">// The second argument is a short descriptor.</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a>   TTree t1<span class="op">(</span><span class="st">"t1"</span><span class="op">,</span> <span class="st">"A simple Tree with simple variables"</span><span class="op">);</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a>   <span class="dt">Float_t</span> met<span class="op">;</span> <span class="co">// Missing energy in the transverse direction.</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a>   <span class="dt">Int_t</span> njets<span class="op">;</span> <span class="co">// Necessary to keep track of the number of jets</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a>   <span class="co">// We'll define these assuming we will not write information for</span></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a>   <span class="co">// more than 16 jets. We'll have to check for this in the code otherwise</span></span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a>   <span class="co">// it could crash!</span></span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a>   <span class="dt">Float_t</span> pt<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb10-30"><a href="#cb10-30" tabindex="-1"></a>   <span class="dt">Float_t</span> eta<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb10-31"><a href="#cb10-31" tabindex="-1"></a>   <span class="dt">Float_t</span> phi<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb10-32"><a href="#cb10-32" tabindex="-1"></a></span>
<span id="cb10-33"><a href="#cb10-33" tabindex="-1"></a>   <span class="co">// The first argument is ROOT's internal name of the variable.</span></span>
<span id="cb10-34"><a href="#cb10-34" tabindex="-1"></a>   <span class="co">// The second argument is the *address* of the actual variable we defined above</span></span>
<span id="cb10-35"><a href="#cb10-35" tabindex="-1"></a>   <span class="co">// The third argument defines the *type* of the variable to be stored, and the "F"</span></span>
<span id="cb10-36"><a href="#cb10-36" tabindex="-1"></a>   <span class="co">// at the end signifies that this is a float</span></span>
<span id="cb10-37"><a href="#cb10-37" tabindex="-1"></a>   t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"met"</span><span class="op">,&amp;</span>met<span class="op">,</span><span class="st">"met/F"</span><span class="op">);</span></span>
<span id="cb10-38"><a href="#cb10-38" tabindex="-1"></a></span>
<span id="cb10-39"><a href="#cb10-39" tabindex="-1"></a>   <span class="co">// First we define njets where the syntax is the same as before,</span></span>
<span id="cb10-40"><a href="#cb10-40" tabindex="-1"></a>   <span class="co">// except we take care to identify this as an integer with the final</span></span>
<span id="cb10-41"><a href="#cb10-41" tabindex="-1"></a>   <span class="co">// /I designation</span></span>
<span id="cb10-42"><a href="#cb10-42" tabindex="-1"></a>   t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"njets"</span><span class="op">,</span> <span class="op">&amp;</span>njets<span class="op">,</span> <span class="st">"njets/I"</span><span class="op">);</span></span>
<span id="cb10-43"><a href="#cb10-43" tabindex="-1"></a></span>
<span id="cb10-44"><a href="#cb10-44" tabindex="-1"></a>   <span class="co">// We can now define the other variables, but we use a slightly different</span></span>
<span id="cb10-45"><a href="#cb10-45" tabindex="-1"></a>   <span class="co">// syntax for the third argument to identify the variable that will be used</span></span>
<span id="cb10-46"><a href="#cb10-46" tabindex="-1"></a>   <span class="co">// to count the number of entries per event</span></span>
<span id="cb10-47"><a href="#cb10-47" tabindex="-1"></a>   t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"pt"</span><span class="op">,</span> <span class="op">&amp;</span>pt<span class="op">,</span> <span class="st">"pt[njets]/F"</span><span class="op">);</span></span>
<span id="cb10-48"><a href="#cb10-48" tabindex="-1"></a>   t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"eta"</span><span class="op">,</span> <span class="op">&amp;</span>eta<span class="op">,</span> <span class="st">"eta[njets]/F"</span><span class="op">);</span></span>
<span id="cb10-49"><a href="#cb10-49" tabindex="-1"></a>   t1<span class="op">.</span>Branch<span class="op">(</span><span class="st">"phi"</span><span class="op">,</span> <span class="op">&amp;</span>phi<span class="op">,</span> <span class="st">"phi[njets]/F"</span><span class="op">);</span></span>
<span id="cb10-50"><a href="#cb10-50" tabindex="-1"></a></span>
<span id="cb10-51"><a href="#cb10-51" tabindex="-1"></a>   <span class="dt">Int_t</span> nevents <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb10-52"><a href="#cb10-52" tabindex="-1"></a></span>
<span id="cb10-53"><a href="#cb10-53" tabindex="-1"></a>   <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>nevents<span class="op">;</span>i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb10-54"><a href="#cb10-54" tabindex="-1"></a></span>
<span id="cb10-55"><a href="#cb10-55" tabindex="-1"></a>       <span class="co">// Generate random number between 10-60 (arbitrary)</span></span>
<span id="cb10-56"><a href="#cb10-56" tabindex="-1"></a>       met <span class="op">=</span> <span class="dv">50</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">()</span> <span class="op">+</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb10-57"><a href="#cb10-57" tabindex="-1"></a></span>
<span id="cb10-58"><a href="#cb10-58" tabindex="-1"></a>       <span class="co">// Generate random number between 0-5, inclusive</span></span>
<span id="cb10-59"><a href="#cb10-59" tabindex="-1"></a>       njets <span class="op">=</span> gRandom<span class="op">-&gt;</span>Integer<span class="op">(</span><span class="dv">6</span><span class="op">);</span></span>
<span id="cb10-60"><a href="#cb10-60" tabindex="-1"></a></span>
<span id="cb10-61"><a href="#cb10-61" tabindex="-1"></a>       <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> j<span class="op">=</span><span class="dv">0</span><span class="op">;</span>j<span class="op">&lt;</span>njets<span class="op">;</span>j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb10-62"><a href="#cb10-62" tabindex="-1"></a>           pt<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="dv">100</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">();</span></span>
<span id="cb10-63"><a href="#cb10-63" tabindex="-1"></a>           eta<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="dv">6</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">();</span></span>
<span id="cb10-64"><a href="#cb10-64" tabindex="-1"></a>           phi<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span>  <span class="fl">6.28</span><span class="op">*</span>gRandom<span class="op">-&gt;</span>Rndm<span class="op">()</span> <span class="op">-</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb10-65"><a href="#cb10-65" tabindex="-1"></a>       <span class="op">}</span></span>
<span id="cb10-66"><a href="#cb10-66" tabindex="-1"></a></span>
<span id="cb10-67"><a href="#cb10-67" tabindex="-1"></a>       <span class="co">// After each event we need to *fill* the TTree</span></span>
<span id="cb10-68"><a href="#cb10-68" tabindex="-1"></a>       t1<span class="op">.</span>Fill<span class="op">();</span></span>
<span id="cb10-69"><a href="#cb10-69" tabindex="-1"></a>   <span class="op">}</span></span>
<span id="cb10-70"><a href="#cb10-70" tabindex="-1"></a></span>
<span id="cb10-71"><a href="#cb10-71" tabindex="-1"></a>   <span class="co">// After we've run over all the events, we "change directory" to the file object</span></span>
<span id="cb10-72"><a href="#cb10-72" tabindex="-1"></a>   <span class="co">// and write the tree to it.</span></span>
<span id="cb10-73"><a href="#cb10-73" tabindex="-1"></a>   <span class="co">// We can also print the tree, just as a visual identifier to ourselves that</span></span>
<span id="cb10-74"><a href="#cb10-74" tabindex="-1"></a>   <span class="co">// the program ran to completion.</span></span>
<span id="cb10-75"><a href="#cb10-75" tabindex="-1"></a>   f<span class="op">.</span>cd<span class="op">();</span></span>
<span id="cb10-76"><a href="#cb10-76" tabindex="-1"></a>   t1<span class="op">.</span>Write<span class="op">();</span></span>
<span id="cb10-77"><a href="#cb10-77" tabindex="-1"></a>   t1<span class="op">.</span>Print<span class="op">();</span></span>
<span id="cb10-78"><a href="#cb10-78" tabindex="-1"></a>   </span>
<span id="cb10-79"><a href="#cb10-79" tabindex="-1"></a>   <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb10-80"><a href="#cb10-80" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Because we need to compile this in such a way that it links to the
ROOT libraries, we will use a <code>Makefile</code> to simplify the
build process.</p>
<p>Create a new file called <code>Makefile</code> in the same directory
as <code>write_ROOT_file.cc</code> and add the following to the file.
You’ll most likely do this with the editor of your choice.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MAKEFILE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode makefile" tabindex="0"><code class="sourceCode makefile"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="dt">CC</span><span class="ch">=</span><span class="st">g++</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="dt">CFLAGS</span><span class="ch">=</span><span class="st">-c -g -Wall `root-config --cflags`</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="dt">LDFLAGS</span><span class="ch">=</span><span class="st">`root-config --glibs`</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="dv">all:</span><span class="dt"> write_ROOT_file</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="dv">write_ROOT_file:</span><span class="dt"> write_ROOT_file.cc</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o write_ROOT_file.o write_ROOT_file.cc</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>    <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> -o write_ROOT_file write_ROOT_file.o <span class="ch">$(</span><span class="dt">LDFLAGS</span><span class="ch">)</span></span></code></pre>
</div>
<div id="warning-tabs-are-important-in-makefiles" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="warning-tabs-are-important-in-makefiles" class="callout-inner">
<h3 class="callout-title">Warning! Tabs are important in Makefiles!<a class="anchor" aria-label="anchor" href="#warning-tabs-are-important-in-makefiles"></a>
</h3>
<div class="callout-content">
<p>Makefiles have been around a long time and are used for many
projects, not just C/C++ code. While other build tools are slowly
supplanting them (e.g. CMake), Makefiles are a pretty tried and true
standard and it is worth taking time at some point and learning <a href="https://www.tutorialspoint.com/makefile/makefile_rules.htm" class="external-link">more
about them</a>.</p>
<p>One frustrating thing though can be a Makefile’s reliance on
<em>tabs</em> for specific purposes. In the example above, the following
lines are preceeded by a <em>tab</em> and <strong><em>not</em></strong>
four (4) spaces.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MAKEFILE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode makefile" tabindex="0"><code class="sourceCode makefile"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>   <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o write_ROOT_file.o write_ROOT_file.cc</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>   <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> -o write_ROOT_file write_ROOT_file.o <span class="ch">$(</span><span class="dt">LDFLAGS</span><span class="ch">)</span></span></code></pre>
</div>
<p>If your Makefile has spaces at those points instead of a tab,
<code>make</code> will not work for you and you will get an error.</p>
</div>
</div>
</div>
<p>You can now compile and run your compiled program from the command
line of your <code>my_root</code> container shell!</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">make</span> write_ROOT_file</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="ex">./write_ROOT_file</span></span></code></pre>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Output from write_ROOT_file
  </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler2" aria-labelledby="headingSpoiler2">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>******************************************************************************
*Tree    :t1        : A simple Tree with simple variables                    *
*Entries :     1000 : Total =           51536 bytes  File  Size =      36858 *
*        :          : Tree compression factor =   1.35                       *
******************************************************************************
*Br    0 :met       : met/F                                                  *
*Entries :     1000 : Total  Size=       4542 bytes  File Size  =       3641 *
*Baskets :        1 : Basket Size=      32000 bytes  Compression=   1.12     *
*............................................................................*
*Br    1 :njets     : njets/I                                                *
*Entries :     1000 : Total  Size=       4552 bytes  File Size  =        841 *
*Baskets :        1 : Basket Size=      32000 bytes  Compression=   4.84     *
*............................................................................*
*Br    2 :pt        : pt[njets]/F                                            *
*Entries :     1000 : Total  Size=      14084 bytes  File Size  =      10445 *
*Baskets :        1 : Basket Size=      32000 bytes  Compression=   1.29     *
*............................................................................*
*Br    3 :eta       : eta[njets]/F                                           *
*Entries :     1000 : Total  Size=      14089 bytes  File Size  =      10424 *
*Baskets :        1 : Basket Size=      32000 bytes  Compression=   1.30     *
*............................................................................*
*Br    4 :phi       : phi[njets]/F                                           *
*Entries :     1000 : Total  Size=      14089 bytes  File Size  =      10758 *
*Baskets :        1 : Basket Size=      32000 bytes  Compression=   1.26     *
*............................................................................*</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Your numbers may be slightly different because of the random numbers
that are generated.</p>
<p>After you’ve run this, you can look in this directory
(<code>ls -ltr</code>) and see if you have a new file called
<code>tree.root</code>. This is the output of what you just ran.</p>
<p>Huzzah! You’ve successfully written your first ROOT file!</p>
<div id="will-i-have-to-make-my-open-data-analysis-code" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="will-i-have-to-make-my-open-data-analysis-code" class="callout-inner">
<h3 class="callout-title">Will I have to <code>make</code> my Open Data
analysis code?<a class="anchor" aria-label="anchor" href="#will-i-have-to-make-my-open-data-analysis-code"></a>
</h3>
<div class="callout-content">
<p>Maybe!</p>
<ul><li>If you prefer to write your end-level analysis code in C++, your
<code>make</code> setup will be very similar to this exercise</li>
<li>If you are analyzing AOD or MiniAOD data and using the dedicated CMS
software, a configuration and build system called <a href="https://twiki.cern.ch/twiki/bin/view/CMSPublic/SWGuideScram" class="external-link">SCRAM</a>
is used for this purpose of compiling and linking code.</li>
<li>If you only analyze NanoAOD samples and do so in python (see the
upcoming lesson pages!), then you will not use <code>make</code>
</li>
</ul></div>
</div>
</div>
</section><section id="read-a-root-file"><h2 class="section-heading">Read a ROOT file<a class="anchor" aria-label="anchor" href="#read-a-root-file"></a>
</h2>
<hr class="half-width"><p>Let’s try to read the <code>tree.root</code> file now. We won’t do
much with but we’ll try to understand the process necessary to read in
all the data and loop over this event-by-event.</p>
<p>You will now edit (with your favourite editor) a file called
<code>read_ROOT_file.cc</code>. In this file, you’ll add the following
code.</p>
<p>We’ll start with the basic include statements and the main
program.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdio&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdlib&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TROOT.h"</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TTree.h"</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TFile.h"</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TRandom.h"</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
<p>In the <code>main</code> function, we’ll define the input file.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>   <span class="co">// Here's the input file</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>   <span class="co">// Without the 'recreate' argument, ROOT will assume this file exists to be read in.</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>   TFile f<span class="op">(</span><span class="st">"tree.root"</span><span class="op">);</span></span></code></pre>
</div>
<p>We’ll make use of the built-in member functions to <code>TFile</code>
to pull out the <code>TTree</code> named <code>t1</code>. There’s a few
other things to note.</p>
<p>First, we’re going to assign it to a local variable named
<code>input_tree</code>. This is to emphasize that <code>t1</code> is
just a string that refers to the name of the object stored in the
<code>TFile</code> and that we can assign it to any variable name, not
just one named <code>t1</code>.</p>
<p>The second thing to note is that we are going to create a
<em>pointer</em> to <code>input_tree</code>, which makes some of the
memory management easier. This means that we precede our variable name
with an asterix <code>*</code>, we have to cast the object pulled out of
the <code>TFile</code> as a <code>TTree</code> pointer
(<code>TTree*</code>), and subsequent uses of <code>input_tree</code>
will access data members and member functions with the
<code>-&gt;</code> operator rather than a period <code>.</code>.</p>
<p>If you want to learn more about pointers, there are <a href="https://www.cplusplus.com/doc/tutorial/pointers/" class="external-link">many</a>, <a href="https://www.w3schools.com/cpp/cpp_pointers.asp" class="external-link">many</a>, <a href="https://www.tutorialspoint.com/cplusplus/cpp_pointers.htm" class="external-link">resources</a>
out there.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>   <span class="co">// We will now "Get" the tree from the file and assign it to</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>   <span class="co">// a new local variable.</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>   TTree <span class="op">*</span>input_tree <span class="op">=</span> <span class="op">(</span>TTree<span class="op">*)</span>f<span class="op">.</span>Get<span class="op">(</span><span class="st">"t1"</span><span class="op">);</span></span></code></pre>
</div>
<p>Just as we did in the <code>write_ROOT_file.cc</code> example, we
will define some local variables. These variables will actually get
“filled” by the ROOT file when we loop over the events.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>   <span class="dt">Float_t</span> met<span class="op">;</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>   <span class="dt">Int_t</span> njets<span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>   <span class="dt">Float_t</span> pt<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>   <span class="dt">Float_t</span> eta<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>   <span class="dt">Float_t</span> phi<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span></code></pre>
</div>
<p>We’ll now assign these local variables to specific
<code>TBranch</code>es in <code>input_tree</code>. Note that we’ll be
using the <em>address</em> of each local variable when we precede the
variable name with an ampersand <code>&amp;</code>.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>   <span class="co">// Assign these variables to specific branch addresses</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>   input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"met"</span><span class="op">,</span> <span class="op">&amp;</span>met<span class="op">);</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>   input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"njets"</span><span class="op">,</span> <span class="op">&amp;</span>njets<span class="op">);</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>   input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"pt"</span><span class="op">,</span> <span class="op">&amp;</span>pt<span class="op">);</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>   input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"eta"</span><span class="op">,</span> <span class="op">&amp;</span>eta<span class="op">);</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>   input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"phi"</span><span class="op">,</span> <span class="op">&amp;</span>phi<span class="op">);</span></span></code></pre>
</div>
<p>We’re ready now to loop over events! Each time we call
<code>input_tree-&gt;GetEntry(i)</code>, it pulls the <code>i</code>th
values out of <code>input_tree</code> and “fills” the local variables
with those values.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>  <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>nevents<span class="op">;</span>i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>       <span class="co">// Get the values for the i`th event and fill all our local variables</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>       <span class="co">// that were assigned to TBranches</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>       input_tree<span class="op">-&gt;</span>GetEntry<span class="op">(</span>i<span class="op">);</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>       <span class="co">// Print the number of jets in this event</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>       printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> njets<span class="op">);</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>       <span class="co">// Print out the momentum for each jet in this event</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>       <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> j<span class="op">=</span><span class="dv">0</span><span class="op">;</span> j<span class="op">&lt;</span>njets<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>           printf<span class="op">(</span><span class="st">"</span><span class="sc">%f</span><span class="st">, </span><span class="sc">%f</span><span class="st">, </span><span class="sc">%f\n</span><span class="st">"</span><span class="op">,</span> pt<span class="op">[</span>j<span class="op">],</span> eta<span class="op">[</span>j<span class="op">],</span> phi<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>       <span class="op">}</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a>   <span class="op">}</span></span></code></pre>
</div>
<p>The final version of your <code>read_ROOT_file.cc</code> should look
like this:</p>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Full source code file for read_ROOT_file.cc
  </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler3" aria-labelledby="headingSpoiler3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">CPP<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode cpp" tabindex="0"><code class="sourceCode cpp"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdio&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cstdlib&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TROOT.h"</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TTree.h"</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TFile.h"</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="pp">#include </span><span class="im">"TRandom.h"</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>  <span class="co">// Here's the input file</span></span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>  <span class="co">// Without the 'recreate' argument, ROOT will assume this file exists to be read in.</span></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>  TFile f<span class="op">(</span><span class="st">"tree.root"</span><span class="op">);</span></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a>  <span class="co">// We will now "Get" the tree from the file and assign it to</span></span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>  <span class="co">// a new local variable.</span></span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a>  TTree <span class="op">*</span>input_tree <span class="op">=</span> <span class="op">(</span>TTree<span class="op">*)</span>f<span class="op">.</span>Get<span class="op">(</span><span class="st">"t1"</span><span class="op">);</span></span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a></span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>  <span class="dt">Float_t</span> met<span class="op">;</span> <span class="co">// Missing energy in the transverse direction.</span></span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a></span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a>  <span class="dt">Int_t</span> njets<span class="op">;</span> <span class="co">// Necessary to keep track of the number of jets</span></span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a></span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a>  <span class="co">// We'll define these assuming we will not write information for</span></span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a>  <span class="co">// more than 16 jets. We'll have to check for this in the code otherwise</span></span>
<span id="cb21-26"><a href="#cb21-26" tabindex="-1"></a>  <span class="co">// it could crash!</span></span>
<span id="cb21-27"><a href="#cb21-27" tabindex="-1"></a>  <span class="dt">Float_t</span> pt<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb21-28"><a href="#cb21-28" tabindex="-1"></a>  <span class="dt">Float_t</span> eta<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb21-29"><a href="#cb21-29" tabindex="-1"></a>  <span class="dt">Float_t</span> phi<span class="op">[</span><span class="dv">16</span><span class="op">];</span></span>
<span id="cb21-30"><a href="#cb21-30" tabindex="-1"></a></span>
<span id="cb21-31"><a href="#cb21-31" tabindex="-1"></a>  <span class="co">// Assign these variables to specific branch addresses</span></span>
<span id="cb21-32"><a href="#cb21-32" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"met"</span><span class="op">,</span> <span class="op">&amp;</span>met<span class="op">);</span></span>
<span id="cb21-33"><a href="#cb21-33" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"njets"</span><span class="op">,</span> <span class="op">&amp;</span>njets<span class="op">);</span></span>
<span id="cb21-34"><a href="#cb21-34" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"pt"</span><span class="op">,</span> <span class="op">&amp;</span>pt<span class="op">);</span></span>
<span id="cb21-35"><a href="#cb21-35" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"eta"</span><span class="op">,</span> <span class="op">&amp;</span>eta<span class="op">);</span></span>
<span id="cb21-36"><a href="#cb21-36" tabindex="-1"></a>  input_tree<span class="op">-&gt;</span>SetBranchAddress<span class="op">(</span><span class="st">"phi"</span><span class="op">,</span> <span class="op">&amp;</span>phi<span class="op">);</span></span>
<span id="cb21-37"><a href="#cb21-37" tabindex="-1"></a></span>
<span id="cb21-38"><a href="#cb21-38" tabindex="-1"></a>  <span class="co">// Get the number of events in the file</span></span>
<span id="cb21-39"><a href="#cb21-39" tabindex="-1"></a>  <span class="dt">Int_t</span> nevents <span class="op">=</span> input_tree<span class="op">-&gt;</span>GetEntries<span class="op">();</span></span>
<span id="cb21-40"><a href="#cb21-40" tabindex="-1"></a></span>
<span id="cb21-41"><a href="#cb21-41" tabindex="-1"></a>  <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>nevents<span class="op">;</span>i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb21-42"><a href="#cb21-42" tabindex="-1"></a></span>
<span id="cb21-43"><a href="#cb21-43" tabindex="-1"></a>      <span class="co">// Get the values for the i`th event and fill all our local variables</span></span>
<span id="cb21-44"><a href="#cb21-44" tabindex="-1"></a>      <span class="co">// that were assigned to TBranches</span></span>
<span id="cb21-45"><a href="#cb21-45" tabindex="-1"></a>      input_tree<span class="op">-&gt;</span>GetEntry<span class="op">(</span>i<span class="op">);</span></span>
<span id="cb21-46"><a href="#cb21-46" tabindex="-1"></a></span>
<span id="cb21-47"><a href="#cb21-47" tabindex="-1"></a>      <span class="co">// Print the number of jets in this event</span></span>
<span id="cb21-48"><a href="#cb21-48" tabindex="-1"></a>      printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span>njets<span class="op">);</span></span>
<span id="cb21-49"><a href="#cb21-49" tabindex="-1"></a></span>
<span id="cb21-50"><a href="#cb21-50" tabindex="-1"></a>      <span class="co">// Print out the momentum for each jet in this event</span></span>
<span id="cb21-51"><a href="#cb21-51" tabindex="-1"></a>      <span class="cf">for</span> <span class="op">(</span><span class="dt">Int_t</span> j<span class="op">=</span><span class="dv">0</span><span class="op">;</span> j<span class="op">&lt;</span>njets<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb21-52"><a href="#cb21-52" tabindex="-1"></a>          printf<span class="op">(</span><span class="st">"</span><span class="sc">%f</span><span class="st">, </span><span class="sc">%f</span><span class="st">, </span><span class="sc">%f\n</span><span class="st">"</span><span class="op">,</span> pt<span class="op">[</span>j<span class="op">],</span> eta<span class="op">[</span>j<span class="op">],</span> phi<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb21-53"><a href="#cb21-53" tabindex="-1"></a>      <span class="op">}</span></span>
<span id="cb21-54"><a href="#cb21-54" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb21-55"><a href="#cb21-55" tabindex="-1"></a></span>
<span id="cb21-56"><a href="#cb21-56" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb21-57"><a href="#cb21-57" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Now we need to modify our <code>Makefile</code> to compile this code.
We edit it so that it looks like this.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MAKEFILE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode makefile" tabindex="0"><code class="sourceCode makefile"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="dt">CC</span><span class="ch">=</span><span class="st">g++</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="dt">CFLAGS</span><span class="ch">=</span><span class="st">-c -g -Wall `root-config --cflags`</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="dt">LDFLAGS</span><span class="ch">=</span><span class="st">`root-config --glibs`</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="dv">all:</span><span class="dt"> write_ROOT_file read_ROOT_file</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a><span class="dv">write_ROOT_file:</span><span class="dt"> write_ROOT_file.cc</span></span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o write_ROOT_file.o write_ROOT_file.cc</span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a>    <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> -o write_ROOT_file write_ROOT_file.o <span class="ch">$(</span><span class="dt">LDFLAGS</span><span class="ch">)</span></span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a><span class="dv">read_ROOT_file:</span><span class="dt"> read_ROOT_file.cc</span></span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o read_ROOT_file.o read_ROOT_file.cc</span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a>    <span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> -o read_ROOT_file read_ROOT_file.o <span class="ch">$(</span><span class="dt">LDFLAGS</span><span class="ch">)</span></span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a></span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a><span class="dv">clean:</span></span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a><span class="er">    </span>rm -f ./*~ ./*.o ./write_ROOT_file</span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a>    rm -f ./*~ ./*.o ./read_ROOT_file</span></code></pre>
</div>
<p>We can now compile and run the code in your <code>my_root</code>
container shell!</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">make</span> read_ROOT_file</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="ex">./read_ROOT_file</span></span></code></pre>
</div>
<p>We get a lot of output! However it should look something like the
following, keeping in mind your numbers will be different because of the
random numbers that make up the values.</p>
<div id="accordionSpoiler4" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler4" aria-expanded="false" aria-controls="collapseSpoiler4">
  <h3 class="accordion-header" id="headingSpoiler4">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Output of read_ROOT_file
  </h3>
</button>
<div id="collapseSpoiler4" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler4" aria-labelledby="headingSpoiler4">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1
85.105431, 5.602912, 0.501085
1
18.954712, 4.375443, -1.546321
1
39.784435, 5.165263, 2.592412
3
80.748314, 0.387768, 1.786288
52.971573, 3.939434, 2.484405
12.969198, 3.115963, 0.910543
3
93.604256, 0.737315, -0.647755
86.382034, 3.493269, -1.573663
68.181541, 3.658454, -1.206015
3
96.990395, 5.839735, 3.046098
79.096542, 4.515290, 0.039709
83.234497, 4.990829, 2.586360
4
60.880657, 1.233623, -2.837789
25.723198, 4.751074, 2.355202
20.403908, 4.656353, -2.171340
18.961079, 1.425917, 2.016828</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Awesome! You’ve now written and read in a very simple ROOT file!
There is obviously much more that can be done, but this should give you
the basics of interfacing with ROOT <code>TFile</code>s and
<code>TTree</code>s.</p>
<p>You’ll see some version of this code when using <em>analyzers</em> to
run over the open data code. At that point, you can write out subsets of
the data to new ROOT files or even simply dump the data to a text or
.csv file.</p>
<p>In the next section, we’ll take a quick look at how to read in a file
and make a few histograms, still using the C++ syntax.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>ROOT defines the file format in which all of the CMS Open Data is
stored.</li>
<li>These files can be accessed quickly using C++ code and the relevant
information can be dumped out into other formats.</li>
</ul></div>
</div>
</div>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/02-cpp-hello-world.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/04-root-and-cpp-fill-a-histogram.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/02-cpp-hello-world.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Lightning overview
        </a>
        <a class="chapter-link float-end" href="../instructor/04-root-and-cpp-fill-a-histogram.html" rel="next">
          Next: Using ROOT with C++... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/cms-opendata-workshop/workbench-template-md/edit/main/episodes/03-root-and-cpp-read-and-write.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/cms-opendata-workshop/workbench-template-md/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/cms-opendata-workshop/workbench-template-md/" class="external-link">Source</a></p>
				<p><a href="https://github.com/cms-opendata-workshop/workbench-template-md/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:cms-dpoa-coordinator@cern.ch">Contact</a> | <a href="https://opendata.cern.ch/docs/about-cms" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.5" class="external-link">sandpaper (0.16.5)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/cms-opendata-workshop/varnish/tree/405b7a74ee1b2fc89c3e49e116ce96d4d65182b3" class="external-link">varnish (1.0.3)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://cms-opendata-workshop.github.io/workbench-template-md/instructor/03-root-and-cpp-read-and-write.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, CMS",
  "name": "Using ROOT with C++ to write and read a file",
  "creativeWorkStatus": "active",
  "url": "https://cms-opendata-workshop.github.io/workbench-template-md/instructor/03-root-and-cpp-read-and-write.html",
  "identifier": "https://cms-opendata-workshop.github.io/workbench-template-md/instructor/03-root-and-cpp-read-and-write.html",
  "dateCreated": "2024-07-29",
  "dateModified": "2024-07-02",
  "datePublished": "2024-07-02"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

